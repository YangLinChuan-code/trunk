"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[703],{407:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Be});a(5633);var t=a(9835),o=a(6970),n=a(499),d=(a(9665),a(7712)),s=a(9185),r=a(831);const m={class:"row items-center"},i={class:"text-subtitle1 q-mr-md"},c={class:"row q-col-gutter-md"},u={class:"col-8 q-gutter-sm row justify-end"},p={__name:"AgreementStorage",props:{modelValue:{type:Array,default:()=>[]},discount:{type:[Number,String],default:0},readonly:{type:Boolean,default:!1},params:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,{t:p}=(0,d.QT)(),_=(0,t.f3)("post"),w=(0,n.qj)({rows:a.modelValue,columns:[{name:"unitNo",label:p("倉庫名稱"),align:"center"},{name:"extent",label:p("面积"),align:"center"},{name:"size",label:p("尺寸"),align:"center"},{name:"storehouse_type",label:p("分店"),align:"center"},{name:"price",label:p("月費"),align:"center"}]});(0,t.YP)((()=>a.modelValue),(e=>{w.rows=b.selected=e}),{deep:!0});const b=(0,n.qj)({visible:!1,form:{name:"",extent:"",price:"",remark:""},selected:a.modelValue,rows:[],columns:[{name:"unitNo",label:p("倉庫名稱"),align:"center"},{name:"netArea",label:p("凈面積^(平方)"),align:"center"},{name:"licenseFee",label:p("月費"),align:"center"},{name:"status",label:p("狀態"),align:"center"},{name:"operator",label:p("操作"),align:"center"}],pagination:{page:1,pageSize:10,total:0}}),g=()=>{b.pagination.page=1,b.visible=!0,f()},V=()=>{b.visible=!1,b.pagination={page:1,pageSize:10,total:0};const e=b.form;e.id=e.unit=e.extent=e.price=e.remark=""},f=()=>{const e={...b.form,page:b.pagination.page,page_size:b.pagination.pageSize,is_order:1,...a.params};_("/quote/storehouse_list",e,(e=>{b.rows=e.info,b.pagination.total=e.pager?.p_rows??0}))},v=()=>{const e=b.form;b.pagination.page=1,e.name=e.unit=e.extent=e.price=e.remark="",f()},U=()=>{b.selected.forEach((e=>{Object.hasOwn(e,"prepayment")||(e.prepayment=1),Object.hasOwn(e,"deposit")||(e.deposit=e.price*e.prepayment),Object.hasOwn(e,"total")||(e.total=1*e.deposit+1*e.price)})),l("update:modelValue",b.selected),V()},W=e=>{const l=b.selected.findIndex((l=>l.id===e.id));l<0?b.selected.push(e):b.selected[l]=e,U()};return(l,a)=>{const n=(0,t.up)("q-btn"),d=(0,t.up)("q-th"),p=(0,t.up)("q-tr"),_=(0,t.up)("q-td"),V=(0,t.up)("q-table"),k=(0,t.up)("q-input"),y=(0,t.up)("q-form"),q=(0,t.up)("q-checkbox"),$=(0,t.up)("q-chip"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",m,[(0,t._)("div",i,"4."+(0,o.zw)(l.$t("倉庫")),1),e.readonly?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(n,{key:0,color:"primary",onClick:g},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("選擇倉庫")),1)])),_:1}))]),(0,t.Wm)(V,{flat:"","row-key":"id","hide-bottom":"",rows:w.rows,columns:w.columns,pagination:{rowsPerPage:0}},{header:(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(d,{align:"center",key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[((0,t.wg)(),(0,t.j4)(p,{props:e,key:e.row.id},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.name),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.fmtCurrency(e.row.extent)),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.size),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.storehouse_name),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(l.fmtCurrency(e.row.price)),1)])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns"]),(0,t.Wm)(r.Z,{title:l.$t("請選擇倉庫"),modelValue:b.visible,"onUpdate:modelValue":a[6]||(a[6]=e=>b.visible=e)},{footer:(0,t.w5)((()=>[(0,t.Wm)(n,{color:"primary",onClick:U},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("批量選擇")),1)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.Wm)(k,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:b.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>b.form.name=e),label:l.$t("倉庫名稱")},null,8,["modelValue","label"]),(0,t.Wm)(k,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:b.form.extent,"onUpdate:modelValue":a[1]||(a[1]=e=>b.form.extent=e),label:l.$t("凈面積^(平方)")},null,8,["modelValue","label"]),(0,t.Wm)(k,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:b.form.price,"onUpdate:modelValue":a[2]||(a[2]=e=>b.form.price=e),label:l.$t("月費")},null,8,["modelValue","label"]),(0,t.Wm)(k,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:b.form.remark,"onUpdate:modelValue":a[3]||(a[3]=e=>b.form.remark=e),label:l.$t("備註")},null,8,["modelValue","label"]),(0,t._)("div",u,[(0,t.Wm)(n,{color:"primary",label:l.$t("搜索"),onClick:f},null,8,["label"]),(0,t.Wm)(n,{label:l.$t("重置"),onClick:v},null,8,["label"])])])])),_:1}),(0,t.Wm)(V,{flat:"",rows:b.rows,columns:b.columns,pagination:{rowsPerPage:0},selection:"multiple",selected:b.selected,"onUpdate:selected":a[5]||(a[5]=e=>b.selected=e),"row-key":"id",class:"q-mt-md"},{header:(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(d,{align:"center",key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{align:"center",width:"100"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.name),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.fmtCurrency(e.row.extent)),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$ "+(0,o.zw)(l.fmtCurrency(e.row.price)),1)])),_:2},1024),(0,t.Wm)(_,{align:"center"},{default:(0,t.w5)((()=>[0===e.row.status?((0,t.wg)(),(0,t.j4)($,{key:0,color:"positive","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("可用")),1)])),_:1})):1===e.row.status?((0,t.wg)(),(0,t.j4)($,{key:1,color:"red","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("佔用")),1)])),_:1})):2===e.row.status?((0,t.wg)(),(0,t.j4)($,{key:2,color:"warning","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("保留")),1)])),_:1})):3===e.row.status?((0,t.wg)(),(0,t.j4)($,{key:3,color:"primary","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("鎖定")),1)])),_:1})):(0,t.kq)("",!0)])),_:2},1024),(0,t.Wm)(_,{align:"center",width:"220"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(n,{color:"primary",unelevated:"",label:l.$t("選擇"),onClick:l=>W(e.row)},null,8,["label","onClick"]),[[h]])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((()=>[(0,t.Wm)(s.Z,{modelValue:b.pagination,"onUpdate:modelValue":[a[4]||(a[4]=e=>b.pagination=e),f]},null,8,["modelValue"])])),_:1},8,["rows","columns","selected"])])),_:1},8,["title","modelValue"])],64)}}};var _=a(8879),w=a(9497),b=a(3532),g=a(1682),V=a(7220),f=a(8326),v=a(6611),U=a(1221),W=a(7691),k=a(2146),y=a(9984),q=a.n(y);const $=p,h=$;q()(p,"components",{QBtn:_.Z,QTable:w.Z,QTr:b.Z,QTh:g.Z,QTd:V.Z,QForm:f.Z,QInput:v.Z,QCheckbox:U.Z,QChip:W.Z}),q()(p,"directives",{ClosePopup:k.Z});const x={class:"row items-center"},z={class:"text-subtitle1 q-mr-md"},S={class:"row justify-center q-gutter-sm"},C={class:"row q-col-gutter-md"},Z={class:"q-mt-md q-gutter-sm"},j={class:"required"},Q={class:"row justify-end q-gutter-sm"},G={__name:"AgreementSmartCard",props:{modelValue:{type:Array,default:()=>[]},discount:{type:Number,default:0},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,{t:m}=(0,d.QT)(),i=(0,t.f3)("post"),c=(0,n.qj)({rows:a.modelValue,columns:[{name:"name",label:m("物品"),align:"center"},{name:"card_no",label:m("卡號"),align:"center"},{name:"price",label:m("價格"),align:"center"},{name:"operate",label:m("操作"),align:"center"}]});(0,t.YP)((()=>a.modelValue),(e=>{c.rows=p.selected=e}),{deep:!0});const u=e=>{const{rowIndex:a}=e;c.rows.splice(a,1),l("update:modelValue",c.rows)},p=(0,n.qj)({visible:!1,form:{name:"",min_price:"",max_price:""},selected:a.modelValue,rows:[],columns:[{name:"name",label:m("物品名稱"),align:"center"},{name:"price",label:m("價格"),align:"center"},{name:"stock",label:m("庫存數量"),align:"center"},{name:"operator",label:m("操作"),align:"center"}],pagination:{page:1,pageSize:10,total:0}}),_=()=>{p.pagination.page=1,p.visible=!0,b()},w=()=>{p.visible=!1,p.pagination={page:1,pageSize:10,total:0};const e=p.form;e.id=e.unit=e.extent=e.price=e.remark=""},b=()=>{const e={...p.form,page:p.pagination.page,page_size:p.pagination.pageSize};i("/orders/smart_card_list",e,(e=>{p.rows=e.info,p.pagination.total=e.pager?.p_rows??0}))},g=()=>{const e=p.form;p.pagination.page=1,e.id=e.unit=e.extent=e.price=e.remark="",b()},V=()=>{l("update:modelValue",p.selected),w()},f=e=>{const l=p.selected.findIndex((l=>l.id===e.id));l<0?p.selected.push(e):p.selected[l]=e,V()},v=()=>{p.selected=c.rows},U=(0,n.qj)({visible:!1,rowIndex:null,form:{card_no:""}}),W=e=>{U.rowIndex=e.rowIndex,U.form.card_no=e.row.card_no,U.visible=!0},k=()=>{const e=c.rows[U.rowIndex];e["card_no"]=U.form.card_no,y()},y=()=>{U.visible=!1,setTimeout((()=>{U.form.card_no=""}))};return(l,a)=>{const n=(0,t.up)("q-btn"),d=(0,t.up)("q-th"),m=(0,t.up)("q-tr"),i=(0,t.up)("q-td"),w=(0,t.up)("q-table"),q=(0,t.up)("q-input"),$=(0,t.up)("q-form"),h=(0,t.up)("q-checkbox"),G=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",x,[(0,t._)("div",z,"5."+(0,o.zw)(l.$t("智能卡")),1),e.readonly?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(n,{key:0,color:"primary",onClick:_},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("新增智能卡")),1)])),_:1}))]),(0,t.Wm)(w,{flat:"","row-key":"id","hide-bottom":"",rows:c.rows,columns:c.columns,pagination:{rowsPerPage:0}},{header:(0,t.w5)((e=>[(0,t.Wm)(m,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(d,{align:"center",key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[((0,t.wg)(),(0,t.j4)(m,{props:a,key:a.row.id},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.name),1)])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.card_no),1)])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(l.fmtCurrency(a.row.price)),1)])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",S,[e.readonly?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(n,{key:0,color:"primary",label:l.$t("輸入卡號"),onClick:e=>W(a)},null,8,["label","onClick"])),(0,t.Wm)(n,{disable:e.readonly,color:"negative",label:l.$t("刪除"),onClick:e=>u(a)},null,8,["disable","label","onClick"])])])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns"]),(0,t.Wm)(r.Z,{title:l.$t("請選擇倉庫"),modelValue:p.visible,"onUpdate:modelValue":a[5]||(a[5]=e=>p.visible=e),onHide:v},{footer:(0,t.w5)((()=>[(0,t.Wm)(n,{color:"primary",onClick:V},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("批量選擇")),1)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)($,null,{default:(0,t.w5)((()=>[(0,t._)("div",C,[(0,t.Wm)(q,{class:"col-4",modelValue:p.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p.form.name=e),outlined:"",dense:"",clearable:"",label:l.$t("物品名稱")},null,8,["modelValue","label"]),(0,t.Wm)(q,{class:"col-4",modelValue:p.form.min_price,"onUpdate:modelValue":a[1]||(a[1]=e=>p.form.min_price=e),outlined:"",dense:"",clearable:"",label:l.$t("最小價格")},null,8,["modelValue","label"]),(0,t.Wm)(q,{class:"col-4",modelValue:p.form.max_price,"onUpdate:modelValue":a[2]||(a[2]=e=>p.form.max_price=e),outlined:"",dense:"",clearable:"",label:l.$t("最大價格")},null,8,["modelValue","label"])]),(0,t._)("div",Z,[(0,t.Wm)(n,{color:"primary",label:l.$t("搜索"),onClick:b},null,8,["label"]),(0,t.Wm)(n,{label:l.$t("重置"),onClick:g},null,8,["label"])])])),_:1}),(0,t.Wm)(w,{flat:"",rows:p.rows,columns:p.columns,pagination:{rowsPerPage:0},selection:"multiple",selected:p.selected,"onUpdate:selected":a[4]||(a[4]=e=>p.selected=e),"row-key":"id",class:"q-mt-md"},{header:(0,t.w5)((e=>[(0,t.Wm)(m,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(d,{align:"center",key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(m,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{align:"center",width:"100"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.selected,"onUpdate:modelValue":l=>e.selected=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.name),1)])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(l.fmtCurrency(e.row.price)),1)])),_:2},1024),(0,t.Wm)(i,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.stock),1)])),_:2},1024),(0,t.Wm)(i,{align:"center",width:"220"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(n,{color:"primary",unelevated:"",label:l.$t("選擇"),onClick:l=>f(e.row)},null,8,["label","onClick"]),[[G]])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((()=>[(0,t.Wm)(s.Z,{modelValue:p.pagination,"onUpdate:modelValue":[a[3]||(a[3]=e=>p.pagination=e),b]},null,8,["modelValue"])])),_:1},8,["rows","columns","selected"])])),_:1},8,["title","modelValue"]),(0,t.Wm)(r.Z,{title:l.$t("請輸入卡號"),modelValue:U.visible,"onUpdate:modelValue":a[7]||(a[7]=e=>U.visible=e),onHide:y},{default:(0,t.w5)((()=>[(0,t.Wm)($,{onSubmit:k},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{dense:"",outlined:"",modelValue:U.form.card_no,"onUpdate:modelValue":a[6]||(a[6]=e=>U.form.card_no=e),"label-slot":"",rules:[e=>e&&e.length>0||l.$t("請輸入智能卡號")]},{label:(0,t.w5)((()=>[(0,t._)("span",j,(0,o.zw)(l.$t("智能卡號")),1)])),_:1},8,["modelValue","rules"]),(0,t._)("div",Q,[(0,t.Wm)(n,{type:"submit",color:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("確定")),1)])),_:1}),(0,t.wy)(((0,t.wg)(),(0,t.j4)(n,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.$t("取消")),1)])),_:1})),[[G]])])])),_:1})])),_:1},8,["title","modelValue"])],64)}}},P=G,T=P;q()(G,"components",{QBtn:_.Z,QTable:w.Z,QTr:b.Z,QTh:g.Z,QTd:V.Z,QForm:f.Z,QInput:v.Z,QCheckbox:U.Z}),q()(G,"directives",{ClosePopup:k.Z});var D=a(8339),H=a(6827);const I={class:"text-h5"},Y={class:"text-h5"},A={class:"row q-col-gutter-x-lg q-col-gutter-y-md"},O={class:"col-6"},F={class:"required"},B={class:"text-subtitle1 q-mb-md"},E={class:"col-xs-12"},K={class:"col-xs-12"},N={class:"required"},R={class:"col-xs-12"},L={class:"col-xs-12"},J={class:"required"},M={class:"col-xs-12"},X={class:"col-xs-12"},ee={class:"col-xs-12"},le={class:"col-xs-12"},ae={class:"col-xs-12"},te={class:"col-xs-12"},oe={class:"required"},ne={class:"col-xs-12"},de={class:"col-6"},se={class:"col-xs-12"},re={class:"text-subtitle1 q-mb-md"},me={class:"text-subtitle1 q-mb-md"},ie={class:"col-xs-12"},ce={class:"col-xs-12"},ue={key:1,class:"row q-col-gutter-x-lg q-col-gutter-y-md"},pe={class:"col-6"},_e={class:"col-6"},we={class:"col-xs-12"},be={class:"row q-col-gutter-x-lg q-col-gutter-y-md"},ge={class:"col-6"},Ve={class:"col-xs-12"},fe={class:"col-6"},ve={class:"col-xs-12"},Ue={class:"text-subtitle1 q-mb-md"},We={class:"row q-col-gutter-x-lg q-col-gutter-y-md"},ke={class:"col-6"},ye={class:"col-xs-12"},qe={class:"col-xs-12"},$e={class:"col-6"},he={class:"col-xs-12"},xe={class:"col-xs-12"},ze={class:"text-subtitle1 q-mb-md"},Se={class:"row q-col-gutter-x-lg q-col-gutter-y-md"},Ce={class:"col-6"},Ze={class:"col-xs-12"},je={class:"col-6"},Qe={class:"col-xs-12"},Ge={class:"text-subtitle1 q-mb-md"},Pe={class:"row q-mt-xs q-gutter-md"},Te=["src"],De={__name:"Edit",setup(e){const{t:l}=(0,d.QT)(),a=(0,D.yj)(),s=(0,D.tv)(),m=(0,t.f3)("post"),i=(0,t.Fl)((()=>({dense:!0,outlined:!0,class:"q-field--with-bottom"}))),c=(0,n.iH)(),u=(0,n.qj)({id:a.params.id,client_abbr:"",customer_id:"",expected_lease_time:"",user_id:"",user_name:"",create_time:"",client_register_ename:"",client_register_name:"",client_id_code:"",client_address:"",client_eaddress:"",client_phone:"",client_telephone:"",client_email:"",client_bank_name:"",client_account:"",client_account_name:"",contact_ename:"",contact_name:"",contact_abbr:"",contact_id_code:"",contact_address:"",contact_phone:"",contact_telephone:"",contact_email:"",id_code_file:"",address_identify:"",declare_url:"",other_url:"",company_seal_url:"",br_url:"",discount:"",discount_total:"",total_price:"",order_num:"",storehouse_type:1,client_company_ename:"",client_company_name:"",client_contact_ename:"",client_contact_name:"",client_certificate:"",client_due_date:0,client_contact_position:"",type:0,status:0,del_time:0,is_order:0,quote_id:0,discount_id:0,discount_info_title:"",discount_info_type:0,discount_info_price:0,discount_info_code:"",payment_id:"",deposit:"",license_start:"",license_end:"",license_num:0,discount_price:"",operate_status:0,declare_form:"",contract_type:"",code:"",whatsapp:"",order_id:"",late_payment_fee:"",license_fee:"",smart_card_fee:"",administrative_fee:"",ca:"",cp:"",agreement_storehouse:[],agreement_goods:[],id_verified:1,address_proof_provided:1,is_consent_email:1,is_agree:1,be_verified:1,br_no:""}),p=(0,n.qj)({abbr:[{label:l("先生"),value:0},{label:l("女士"),value:1},{label:l("小姐"),value:2}]}),_=(0,n.qj)({order_num:[e=>e&&e.length>0||l("請輸入協議編號")],date:[e=>e&&e.length>0||l("請選擇日期")],client_register_ename:[e=>e&&e.length>0||l("請輸入注冊名稱")],client_company_ename:[e=>e&&e.length>0||l("請輸入公司名稱")],client_phone:[e=>e&&""!==e||l("請輸入手提電話")]}),w=()=>{m("/orders/agreement_edit",{id:u.id},(e=>{for(const l in u)Object.hasOwn(u,l)&&(u[l]=e.info[l])}))};(0,t.bv)((()=>{w()}));const b=()=>{c.value.validate().then((e=>{if(!e)return document.activeElement?.scrollIntoView({behavior:"smooth"});m("/orders/agreement_save",u,(e=>{"success"===e.status?(H.Z.create({message:e.message,position:"top",color:"positive"}),s.go(-1)):H.Z.create({message:e.message,position:"top",color:"negative"})}))}))},g=(0,n.qj)({visible:!1,loading:!1,url:""}),V=()=>{c.value.validate().then((e=>{if(!e)return document.activeElement?.scrollIntoView({behavior:"smooth"});g.loading=!0;const l=1===u.type?"/orders/preview_agreement_corporate_pdf":"/orders/preview_agreement_personal_pdf";m(l,u,(e=>{g.loading=!1,"success"===e.status?(g.visible=!0,g.url=e.info.pdfurl):H.Z.create({message:e.message,position:"top",color:"positive"})}))}))},f=()=>{s.go(-1)};return(e,l)=>{const a=(0,t.up)("q-card-section"),d=(0,t.up)("q-input"),s=(0,t.up)("q-select"),m=(0,t.up)("date"),w=(0,t.up)("q-checkbox"),v=(0,t.up)("q-btn"),U=(0,t.up)("q-card"),W=(0,t.up)("q-form"),k=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(k,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{ref_key:"formRef",ref:c},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{class:"q-pa-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",I,(0,o.zw)(e.$t("檢示訂單")),1)])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",Y,(0,o.zw)(e.$t("協議編號"))+" "+(0,o.zw)(u.order_num),1)])),_:1}),(0,t.Wm)(a,{class:"q-pb-none"},{default:(0,t.w5)((()=>[(0,t._)("div",A,[(0,t._)("div",O,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{modelValue:u.order_num,"onUpdate:modelValue":l[0]||(l[0]=e=>u.order_num=e),"label-slot":"",rules:_.order_num}),{label:(0,t.w5)((()=>[(0,t._)("span",F,(0,o.zw)(e.$t("協議編號")),1)])),_:1},16,["modelValue","rules"]),(0,t._)("div",B,"1."+(0,o.zw)(e.$t("客戶的資料")),1),(0,t._)("div",E,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{modelValue:u.code,"onUpdate:modelValue":l[1]||(l[1]=e=>u.code=e),label:e.$t("客戶編號")}),null,16,["modelValue","label"])]),0===u.type?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("div",K,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{"label-slot":"",modelValue:u.client_register_ename,"onUpdate:modelValue":l[2]||(l[2]=e=>u.client_register_ename=e),rules:_.client_register_ename}),{label:(0,t.w5)((()=>[(0,t._)("span",N,(0,o.zw)(e.$t("註冊名稱")),1)])),_:1},16,["modelValue","rules"])]),(0,t._)("div",R,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("註冊名稱(中文)"),modelValue:u.client_register_name,"onUpdate:modelValue":l[3]||(l[3]=e=>u.client_register_name=e)}),null,16,["label","modelValue"])])],64)):(0,t.kq)("",!0),1===u.type?((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t._)("div",L,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{"label-slot":"",modelValue:u.client_company_ename,"onUpdate:modelValue":l[4]||(l[4]=e=>u.client_company_ename=e),rules:_.client_company_ename}),{label:(0,t.w5)((()=>[(0,t._)("span",J,(0,o.zw)(e.$t("公司名稱")),1)])),_:1},16,["modelValue","rules"])]),(0,t._)("div",M,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("公司名稱(中文)"),modelValue:u.client_company_name,"onUpdate:modelValue":l[5]||(l[5]=e=>u.client_company_name=e)}),null,16,["label","modelValue"])])],64)):(0,t.kq)("",!0),(0,t._)("div",X,[(0,t.Wm)(s,(0,t.dG)((0,n.SU)(i),{"emit-value":"","map-options":"",label:e.$t("Abbr"),modelValue:u.client_abbr,"onUpdate:modelValue":l[6]||(l[6]=e=>u.client_abbr=e),options:p.abbr}),null,16,["label","modelValue","options"])]),(0,t._)("div",ee,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("身份證號碼"),modelValue:u.client_id_code,"onUpdate:modelValue":l[7]||(l[7]=e=>u.client_id_code=e)}),null,16,["label","modelValue"])]),(0,t._)("div",le,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("地址"),modelValue:u.client_eaddress,"onUpdate:modelValue":l[8]||(l[8]=e=>u.client_eaddress=e)}),null,16,["label","modelValue"])]),(0,t._)("div",ae,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("地址(中文)"),modelValue:u.client_address,"onUpdate:modelValue":l[9]||(l[9]=e=>u.client_address=e)}),null,16,["label","modelValue"])]),(0,t._)("div",te,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{"label-slot":"",modelValue:u.client_phone,"onUpdate:modelValue":l[10]||(l[10]=e=>u.client_phone=e),rules:_.client_phone}),{label:(0,t.w5)((()=>[(0,t._)("span",oe,(0,o.zw)(e.$t("手提電話")),1)])),_:1},16,["modelValue","rules"])]),(0,t._)("div",ne,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("電郵"),modelValue:u.client_email,"onUpdate:modelValue":l[11]||(l[11]=e=>u.client_email=e)}),null,16,["label","modelValue"])])]),(0,t._)("div",de,[(0,t._)("div",se,[(0,t.Wm)(m,(0,t.dG)((0,n.SU)(i),{required:"",label:e.$t("日期"),"stack-label":"",class:"col-5",modelValue:u.create_time,"onUpdate:modelValue":l[12]||(l[12]=e=>u.create_time=e),rules:_.date}),null,16,["label","modelValue","rules"])]),(0,t._)("div",re,"2."+(0,o.zw)(e.$t("聯繫人資料")),1),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人名字"),modelValue:u.contact_ename,"onUpdate:modelValue":l[13]||(l[13]=e=>u.contact_ename=e)}),null,16,["label","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人名字（中文）"),modelValue:u.contact_name,"onUpdate:modelValue":l[14]||(l[14]=e=>u.contact_name=e)}),null,16,["label","modelValue"]),(0,t.Wm)(s,(0,t.dG)((0,n.SU)(i),{label:e.$t("Abbr"),"emit-value":"","map-options":"",options:p.abbr,modelValue:u.contact_abbr,"onUpdate:modelValue":l[15]||(l[15]=e=>u.contact_abbr=e)}),null,16,["label","options","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人身份證號碼"),modelValue:u.contact_id_code,"onUpdate:modelValue":l[16]||(l[16]=e=>u.contact_id_code=e)}),null,16,["label","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人地址"),modelValue:u.contact_address,"onUpdate:modelValue":l[17]||(l[17]=e=>u.contact_address=e)}),null,16,["label","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人手提電話"),modelValue:u.contact_phone,"onUpdate:modelValue":l[18]||(l[18]=e=>u.contact_phone=e)}),null,16,["label","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人辦公室/住宅電話"),modelValue:u.contact_telephone,"onUpdate:modelValue":l[19]||(l[19]=e=>u.contact_telephone=e)}),null,16,["label","modelValue"]),(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("聯繫人電郵"),modelValue:u.contact_email,"onUpdate:modelValue":l[20]||(l[20]=e=>u.contact_email=e)}),null,16,["label","modelValue"])])])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",me,"3."+(0,o.zw)(e.$t("核實")),1),0===u.type?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("div",ie,[(0,t.Wm)(w,{modelValue:u.id_verified,"onUpdate:modelValue":l[21]||(l[21]=e=>u.id_verified=e),"true-value":1,"false-value":0,label:e.$t("已核實身份證")},null,8,["modelValue","label"])]),(0,t._)("div",ce,[(0,t.Wm)(w,{modelValue:u.address_proof_provided,"onUpdate:modelValue":l[22]||(l[22]=e=>u.address_proof_provided=e),"true-value":1,"false-value":0,label:e.$t("已提供住址證明")},null,8,["modelValue","label"])])],64)):(0,t.kq)("",!0),1===u.type?((0,t.wg)(),(0,t.iD)("div",ue,[(0,t._)("div",pe,[(0,t.Wm)(w,{modelValue:u.be_verified,"onUpdate:modelValue":l[23]||(l[23]=e=>u.be_verified=e),"true-value":1,"false-value":0,label:e.$t("已核實商業登記")},null,8,["modelValue","label"])]),(0,t._)("div",_e,[(0,t._)("div",we,[(0,t.Wm)(d,(0,t.dG)({modelValue:u.br_no,"onUpdate:modelValue":l[24]||(l[24]=e=>u.br_no=e),"true-value":1,"false-value":0},(0,n.SU)(i),{label:e.$t("商業登記號碼")}),null,16,["modelValue","label"])])])])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:u.agreement_storehouse,"onUpdate:modelValue":l[25]||(l[25]=e=>u.agreement_storehouse=e),params:{id:e.$route.params.id}},null,8,["modelValue","params"])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(T),{modelValue:u.agreement_goods,"onUpdate:modelValue":l[26]||(l[26]=e=>u.agreement_goods=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",be,[(0,t._)("div",ge,[(0,t._)("div",Ve,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:"CP",modelValue:u.ca,"onUpdate:modelValue":l[27]||(l[27]=e=>u.ca=e)}),null,16,["modelValue"])])]),(0,t._)("div",fe,[(0,t._)("div",ve,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:"CA",modelValue:u.cp,"onUpdate:modelValue":l[28]||(l[28]=e=>u.cp=e)}),null,16,["modelValue"])])])])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",Ue,"6."+(0,o.zw)(e.$t("費用")),1),(0,t._)("div",We,[(0,t._)("div",ke,[(0,t._)("div",ye,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("許可費用(/月)"),modelValue:u.license_fee,"onUpdate:modelValue":l[29]||(l[29]=e=>u.license_fee=e)}),null,16,["label","modelValue"])]),(0,t._)("div",qe,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("智能卡費用(/張)"),modelValue:u.smart_card_fee,"onUpdate:modelValue":l[30]||(l[30]=e=>u.smart_card_fee=e)}),null,16,["label","modelValue"])])]),(0,t._)("div",$e,[(0,t._)("div",he,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("遲繳罰金"),modelValue:u.late_payment_fee,"onUpdate:modelValue":l[31]||(l[31]=e=>u.late_payment_fee=e)}),null,16,["label","modelValue"])]),(0,t._)("div",xe,[(0,t.Wm)(d,(0,t.dG)((0,n.SU)(i),{label:e.$t("行政費"),modelValue:u.administrative_fee,"onUpdate:modelValue":l[32]||(l[32]=e=>u.administrative_fee=e)}),null,16,["label","modelValue"])])])])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",ze,"7."+(0,o.zw)(e.$t("許可證期")),1),(0,t._)("div",Se,[(0,t._)("div",Ce,[(0,t._)("div",Ze,[(0,t.Wm)(m,(0,t.dG)((0,n.SU)(i),{required:"",modelValue:u.license_start,"onUpdate:modelValue":l[33]||(l[33]=e=>u.license_start=e),label:e.$t("合約時段"),"stack-label":"",class:"col-5"}),null,16,["modelValue","label"])])]),(0,t._)("div",je,[(0,t._)("div",Qe,[(0,t.Wm)(m,(0,t.dG)((0,n.SU)(i),{required:"",modelValue:u.license_end,"onUpdate:modelValue":l[34]||(l[34]=e=>u.license_end=e),label:e.$t("至"),"stack-label":"",class:"col-5"}),null,16,["modelValue","label"])])])])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",Ge,"8."+(0,o.zw)(e.$t("聲明")),1),(0,t.Uk)(" "+(0,o.zw)(e.$t("獲許可方同意以電子方式接收所有通知及通信，並同意所有通知及通信將不以傳統郵件形式寄送。如獲許可方之通訊方式有任何變更，獲許可方有責任通知我們。"))+" ",1),(0,t._)("div",null,[(0,t.Wm)(w,{modelValue:u.is_consent_email,"onUpdate:modelValue":l[35]||(l[35]=e=>u.is_consent_email=e),"true-value":1,"false-value":0,label:e.$t("我方同意只以電子方式通信")},null,8,["modelValue","label"])]),(0,t.Uk)(" "+(0,o.zw)(e.$t("許可方或會向獲許可方發送敝方可能感興趣的營銷及宣傳材料以宣傳我們的服務。請表示獲許可方是否同意接收此等資訊。"))+" ",1),(0,t._)("div",null,[(0,t.Wm)(w,{modelValue:u.is_agree,"onUpdate:modelValue":l[36]||(l[36]=e=>u.is_agree=e),"true-value":1,"false-value":0,label:e.$t("我方同意接收上述宣傳材料")},null,8,["modelValue","label"])])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t._)("div",Pe,[(0,t.Wm)(v,{size:"md",color:"primary",unelevated:"",label:e.$t("儲存"),onClick:b},null,8,["label"]),(0,t.Wm)(v,{onClick:f,size:"md",color:"negative",unelevated:"",label:e.$t("返回")},null,8,["label"]),(0,t.Wm)(v,{size:"md",color:"primary",unelevated:"",label:e.$t("預覽PDF"),loading:g.loading,onClick:V},null,8,["label","loading"])])])),_:1})])),_:1})])),_:1},512),(0,t.Wm)((0,n.SU)(r.Z),{modelValue:g.visible,"onUpdate:modelValue":l[37]||(l[37]=e=>g.visible=e),title:e.$t("預覽")+"PDF"},{default:(0,t.w5)((()=>[(0,t._)("iframe",{src:e.resolveAssetsURL(g.url),frameborder:"0",style:{width:"80vw",height:"80vh"}},null,8,Te)])),_:1},8,["modelValue","title"])])),_:1})}}};var He=a(9885),Ie=a(4458),Ye=a(3190),Ae=a(2259),Oe=a(8149);const Fe=De,Be=Fe;q()(De,"components",{QPage:He.Z,QForm:f.Z,QCard:Ie.Z,QCardSection:Ye.Z,QInput:v.Z,QSelect:Ae.Z,QCheckbox:U.Z,QBtn:_.Z,QField:Oe.Z})}}]);