"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[928],{4306:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});a(9665);var t=a(9835),n=a(6970),o=a(499),r=a(7712),i=a(6827),s=a(9185),u=a(8339),d=a(831);const m={class:"row q-col-gutter-x-lg"},c={class:"row q-col-gutter-x-lg"},p={class:"row q-col-gutter-x-lg"},g={class:"row q-gutter-x-lg"},_={class:"row justify-end q-gutter-lg q-mr-lg"},b={style:{"white-space":"break-spaces"}},w={class:"row justify-center q-gutter-sm"},f=["data"],W={__name:"Index",setup(e){const{t:l}=(0,r.QT)(),a=(0,u.tv)(),W=(0,u.yj)(),V=(l("新增"),(0,t.f3)("post")),h=(0,o.qj)({create_start_time:"",create_end_time:"",storehouse_name:"",customer_name:"",order_num:"",agreement_orernum:"",client_email:"",client_telephone:""}),q=(0,o.qj)({rows:[],columns:[{name:"order_num",label:l("收款單編號"),align:"center",sortable:!0},{name:"agreement_orernum",label:l("協議編號"),align:"center",sortable:!0},{name:"customerName",label:l("客戶名稱"),align:"center"},{name:"storehouseName",label:l("倉庫名稱"),align:"center"},{name:"create_time",label:l("建立時間"),align:"center",sortable:!0},{name:"client_email",label:l("客戶電郵"),align:"center",sortable:!0},{name:"client_telephone",label:l("辦公室/電話"),align:"center",sortable:!0},{name:"operate",label:l("操作"),align:"center"}],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}});(0,t.bv)((()=>{U({pagination:q.pagination})}));const U=({pagination:e})=>{let{page:l,rowsPerPage:a,sortBy:t,descending:n}=e;const o={page:l,page_size:a,sort_name:t,sort_order:n?0:1,form:h};V("/orders/collection_list",o,(e=>{"success"===e.status?(q.rows=e.info,q.pagination.rowsNumber=e?.pager?.p_rows??0,q.pagination.page=l,q.pagination.rowsPerPage=a,q.pagination.sortBy=t,q.pagination.descending=n):i.Z.create({message:e.message,position:"top",color:"negative"})}))},k=e=>{const l=W.params.id;a.push(`/order/debit/${l}/${e}`)},v=()=>{h.client_telephone=h.client_email=h.agreement_orernum=h.create_start_time=h.create_end_time=h.storehouse_name=h.customer_name=h.order_num="",q.pagination.page=1,q.pagination.rowsNumber=0,q.pagination.sortBy="id",q.pagination.descending=!1,U({pagination:q.pagination})},y=(0,o.qj)({loading:!1,id:null,url:"",visible:!1});function $(e){y.loading=!0,y.id=e,V("/orders/create_pdf",{order_num:e},(e=>{"success"===e.status?(y.url=e.info["pdfurl"],y.loading=!1,y.visible=!0,y.id=null):(i.Z.create({message:l("預覽失敗"),position:"top",color:"negative"}),y.loading=!1,y.id=null)}))}const Z=()=>{q.pagination.page=1,U({pagination:q.pagination})};return(e,l)=>{const a=(0,t.up)("date"),r=(0,t.up)("q-input"),i=(0,t.up)("q-btn"),u=(0,t.up)("q-card-section"),W=(0,t.up)("q-form"),V=(0,t.up)("q-th"),Q=(0,t.up)("q-tr"),j=(0,t.up)("q-td"),z=(0,t.up)("q-table"),P=(0,t.up)("q-card"),C=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(C,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"q-col-gutter-lg",onSubmit:Z,onReset:v},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"q-gutter-y-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.Wm)(a,{class:"col-4",label:e.$t("創建時間"),outlined:"",dense:"",clearable:"",modelValue:h.create_start_time,"onUpdate:modelValue":l[0]||(l[0]=e=>h.create_start_time=e)},null,8,["label","modelValue"]),(0,t.Wm)(a,{class:"col-4",label:e.$t("至"),outlined:"",dense:"",clearable:"",modelValue:h.create_end_time,"onUpdate:modelValue":l[1]||(l[1]=e=>h.create_end_time=e)},null,8,["label","modelValue"]),(0,t.Wm)(r,{outlined:"",dense:"",clearable:"",modelValue:h.customer_name,"onUpdate:modelValue":l[2]||(l[2]=e=>h.customer_name=e),label:e.$t("客戶名稱"),class:"col-4"},null,8,["modelValue","label"])]),(0,t._)("div",c,[(0,t.Wm)(r,{class:"col-4",label:e.$t("倉庫名稱"),outlined:"",dense:"",clearable:"",modelValue:h.storehouse_name,"onUpdate:modelValue":l[3]||(l[3]=e=>h.storehouse_name=e)},null,8,["label","modelValue"]),(0,t.Wm)(r,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:h.order_num,"onUpdate:modelValue":l[4]||(l[4]=e=>h.order_num=e),label:e.$t("收款單編號")},null,8,["modelValue","label"]),(0,t.Wm)(r,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:h.agreement_orernum,"onUpdate:modelValue":l[5]||(l[5]=e=>h.agreement_orernum=e),label:e.$t("協議編號")},null,8,["modelValue","label"])]),(0,t._)("div",p,[(0,t.Wm)(r,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:h.client_email,"onUpdate:modelValue":l[6]||(l[6]=e=>h.client_email=e),label:e.$t("客戶電郵")},null,8,["modelValue","label"]),(0,t.Wm)(r,{class:"col-4",outlined:"",dense:"",clearable:"",modelValue:h.client_telephone,"onUpdate:modelValue":l[7]||(l[7]=e=>h.client_telephone=e),label:e.$t("辦公室/電話")},null,8,["modelValue","label"])]),(0,t._)("div",g,[(0,t.Wm)(i,{type:"submit",color:"primary",label:e.$t("搜索")},null,8,["label"]),(0,t.Wm)(i,{type:"reset",outline:"",color:"dark",label:e.$t("重置")},null,8,["label"])])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t._)("div",_,[(0,t.Wm)(i,{color:"primary",unelevated:"",label:e.$t("建立"),to:"/order/create"},null,8,["label"])])])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(z,{flat:"",rows:q.rows,columns:q.columns,"row-key":"id",pagination:q.pagination,"onUpdate:pagination":l[8]||(l[8]=e=>q.pagination=e),selection:"multiple",selected:q.selected,"onUpdate:selected":l[9]||(l[9]=e=>q.selected=e),"binary-state-sort":"",onRequest:U},{header:(0,t.w5)((l=>[(0,t.Wm)(Q,{props:l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.cols,(a=>((0,t.wg)(),(0,t.j4)(V,{align:"center",key:a.name,props:l},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t(a.label)),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((l=>[(0,t.Wm)(Q,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.order_num),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.agreement_orernum),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.client_name),1)])),_:2},1024),(0,t.Wm)(j,{align:"center",width:"300"},{default:(0,t.w5)((()=>[(0,t._)("div",b,(0,n.zw)(l.row.storehouse_name),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.create_time),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.client_email),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.row.client_telephone),1)])),_:2},1024),(0,t.Wm)(j,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t.Wm)(i,{loading:y.loading&&y.id===l.row.id,color:"info",label:e.$t("預覽")+" PDF",onClick:e=>$(l.row.id)},null,8,["loading","label","onClick"]),(0,t.Wm)(i,{color:"primary",label:e.$t("編輯"),onClick:e=>k(l.row.id)},null,8,["label","onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((e=>[(0,t.Wm)((0,o.SU)(s.Z),{modelValue:e.pagination,"onUpdate:modelValue":[l=>e.pagination=l,U]},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","columns","pagination","selected"])])),_:1})])),_:1}),(0,t.Wm)((0,o.SU)(d.Z),{title:e.$t("預覽")+" PDF",modelValue:y.visible,"onUpdate:modelValue":l[10]||(l[10]=e=>y.visible=e)},{default:(0,t.w5)((()=>[(0,t._)("object",{data:e.resolveAssetsURL(y.url),type:"application/pdf",style:{width:"90vw",height:"80vh","max-width":"1200px"}},null,8,f)])),_:1},8,["title","modelValue"])])),_:1})}}};var V=a(9885),h=a(4458),q=a(3190),U=a(8326),k=a(6611),v=a(8879),y=a(9497),$=a(3532),Z=a(1682),Q=a(7220),j=a(9984),z=a.n(j);const P=W,C=P;z()(W,"components",{QPage:V.Z,QCard:h.Z,QCardSection:q.Z,QForm:U.Z,QInput:k.Z,QBtn:v.Z,QTable:y.Z,QTr:$.Z,QTh:Z.Z,QTd:Q.Z})}}]);