"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[593,98],{8270:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Qt});l(5633),l(9665);var a=l(9835),n=l(6970),o=l(499),i=l(6827),r=l(831),d=l(5544),u=l(9185),c=l(7269),s=l(2835),_=l(530),p=l(2736),m=l(6882),w=l(5124),g=l.n(w),f=l(8126),b=l(465);const y=e=>((0,a.dD)("data-v-65bd4504"),e=e(),(0,a.Cn)(),e),h={class:"noneBorder",colspan:"5"},k={class:"title"},z=y((()=>(0,a._)("td",{colspan:"2",rowspan:"8"},[(0,a._)("img",{src:g()})],-1))),$={colspan:"4"},U={colspan:"4"},V=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),v=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),q={colspan:"4"},W={colspan:"4"},Y={colspan:"4"},D={colspan:"4"},S=y((()=>(0,a._)("td",null,"Debit Note No.：",-1))),Z={colspan:"4"},H=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),N=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),x={style:{background:"#039099",color:"#fff"}},j={colspan:"2"},C={colspan:"2"},B={rowspan:"2"},P={rowspan:"2"},Q={rowspan:"2"},I=y((()=>(0,a._)("td",null,null,-1))),T={colspan:"2"},F=y((()=>(0,a._)("td",null,null,-1))),K={colspan:"2"},O=y((()=>(0,a._)("td",null,null,-1))),A={colspan:"2"},E=y((()=>(0,a._)("td",null,"2",-1))),M=y((()=>(0,a._)("td",null,null,-1))),R=y((()=>(0,a._)("td",{colspan:"2"},null,-1))),L=y((()=>(0,a._)("td",null,null,-1))),G=y((()=>(0,a._)("td",null,null,-1))),J=y((()=>(0,a._)("td",{colspan:"2"},null,-1))),X=y((()=>(0,a._)("td",null,null,-1))),ee=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),te=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),le={colspan:"2"},ae={rowspan:"2"},ne=y((()=>(0,a._)("td",{rowspan:"2"},null,-1))),oe={rowspan:"2"},ie=y((()=>(0,a._)("td",null,null,-1))),re={colspan:"2"},de=y((()=>(0,a._)("td",null,null,-1))),ue={colspan:"2"},ce=y((()=>(0,a._)("td",null,null,-1))),se={colspan:"2"},_e=y((()=>(0,a._)("td",null,"2",-1))),pe=y((()=>(0,a._)("td",null,null,-1))),me=y((()=>(0,a._)("td",{colspan:"2"},null,-1))),we=y((()=>(0,a._)("td",null,null,-1))),ge=y((()=>(0,a._)("td",null,null,-1))),fe=y((()=>(0,a._)("td",{colspan:"2"},null,-1))),be=y((()=>(0,a._)("td",null,null,-1))),ye=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),he=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),ke={colspan:"2"},ze=y((()=>(0,a._)("td",null," 1",-1))),$e=y((()=>(0,a._)("td",null,null,-1))),Ue=y((()=>(0,a._)("td",{colspan:"2"},"其他商品描述",-1))),Ve=y((()=>(0,a._)("td",null,null,-1))),ve=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),qe=y((()=>(0,a._)("tr",null,[(0,a._)("td",{class:"noneBorder"})],-1))),We=y((()=>(0,a._)("td",{colspan:"2"},"優惠智能卡描述",-1))),Ye=y((()=>(0,a._)("td",null," 1",-1))),De=y((()=>(0,a._)("td",null,null,-1))),Se=y((()=>(0,a._)("td",null,null,-1))),Ze={colspan:"5"},He={colspan:"5",rowspan:"4"},Ne={__name:"Confirm",props:{data:{type:Object,default:()=>({is_merge:0,search_info:"",quote_id:"",customer:{type:0,client_register_name:"",client_id_code:"",client_address:"",client_phone:"",client_telephone:"",client_email:"",client_bank_name:"",client_account:"",client_account_name:"",contact_ename:"",contact_name:"",contact_id_code:"",contact_address:"",contact_phone:"",contact_telephone:"",contact_email:"",id_code_file:"",address_identify:"",declare_url:"",other_url:"",br_url:"",company_seal_url:"",client_company_ename:"",client_company_name:"",client_contact_ename:"",client_contact_name:"",client_certificate:"",client_due_date:"",client_register_ename:"",client_contact_position:""},storehouse_info:[],merge_storehouse_info:[],smart_card_info:[],goods_info:[],update_price:{discount:0,discount_type:1,deposit:0,discount_id:"",license_num:1,license_start:"",license_end:"",license_date:[{start:"",end:"",price:""}],select_payment:"",declare_form:"",contract_type:"",remark_info:[],total_price:0,discount_price:0,month:1,coupon_price:0,free_month:0,coupon_type:0,coupon:0,front_money:0}})},discount_smart_card:{type:Array,default:()=>[]},options:{type:Object,default:()=>({payment:[],coupon:[]})}},setup(e){const t=e;(0,a.bv)((()=>{t.data.merge_storehouse_info.length>0&&l()}));const l=()=>{let e=(0,b.I8)(t.data.merge_storehouse_info);const l=e[0].merge_name.split(",");return e[0].merge_name=l.sort(((e,t)=>{const l=Number(e.split("-")[1]),a=Number(t.split("-")[1]);return l-a})).shift(),e},i=()=>{const e=t.data.storehouse_info.reduce(((e,t)=>e+Number(t.deposit)*Number(t.prepayment)),0);return(0,b.Yu)(t.data.update_price.total_price+Number(t.data.update_price.front_money)-e)},r=e=>{const l=0===t.data.is_merge?e.price*t.data.update_price.month-s(e)-u(e):1*t.data.merge_storehouse_info[0].merge_price*(1*t.data.merge_storehouse_info[0].merge_extent)-s(e)-u(e);return l>0?0===t.data.is_merge?l+2*e.price:l+1*t.data.merge_storehouse_info[0].merge_price*(1*t.data.merge_storehouse_info[0].merge_extent):0===t.data.is_merge?2*e.price:1*t.data.merge_storehouse_info[0].merge_price*(1*t.data.merge_storehouse_info[0].merge_extent)},d=()=>0===t.data.update_price.coupon_type?(0,b.Yu)(t.data.update_price.coupon):t.data.update_price.coupon?t.data.update_price.coupon+"%":t.data.update_price.coupon,u=e=>{const l=0===t.data.is_merge?t.data.update_price.month*e.price:1*t.data.merge_storehouse_info[0].merge_price*(1*t.data.merge_storehouse_info[0].merge_extent);return 0===t.data.update_price.coupon_type?(0,b.Yu)(t.data.update_price.coupon):1===t.data.update_price.discount_type?(l-t.data.update_price.discount)*(t.data.update_price.coupon/100):(l-t.data.update_price.month*e.price*(t.data.update_price.discount/100))*(t.data.update_price.coupon/100)},c=()=>1===t.data.update_price.discount_type?(0,b.Yu)(t.data.update_price.discount):t.data.update_price.discount?t.data.update_price.discount+"%":Number(t.data.update_price.discount),s=e=>{const l=0===t.data.is_merge?t.data.update_price.month*e.price:1*t.data.merge_storehouse_info[0].merge_price*(1*t.data.merge_storehouse_info[0].merge_extent);return 1===t.data.update_price.discount_type?t.data.update_price.discount:l*(t.data.update_price.discount/100)},_=(0,a.Fl)((()=>{const e=f.Z.getItem("storeList"),t=f.Z.getItem("storehouse_name_id");return e.find((e=>e.id==t))??{id:"",name:"",short_name:""}})),p=(new Date).toLocaleDateString().replaceAll("/","-"),m=(0,a.Fl)((()=>t.options.payment.find((e=>e.value===t.data.update_price.select_payment))??{label:"",value:""}));return(w,g)=>((0,a.wg)(),(0,a.iD)("table",null,[(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",h,[(0,a._)("div",k,"DEBIT NOTE "+(0,n.zw)(w.$t("付款通知書")),1)]),z]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("電話"))+"：",1),(0,a._)("td",$,(0,n.zw)(e.data.customer.client_telephone),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("郵箱"))+"：",1),(0,a._)("td",U,(0,n.zw)(e.data.customer.client_email),1)]),V,v,(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("倉庫單元"))+" No.：",1),(0,a._)("td",q,(0,n.zw)(e.data.storehouse_info.map((e=>e.name)).join(",")),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("客戶"))+" ID：",1),(0,a._)("td",W,(0,n.zw)(e.data.customer.code),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("協議"))+" No.：",1),(0,a._)("td",Y,(0,n.zw)(w.$t("保存訂單後生成")),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("員工"))+" ID.：",1),(0,a._)("td",D,(0,n.zw)((0,o.SU)(f.Z).getItem("name")),1),S,(0,a._)("td",null,(0,n.zw)(w.$t("保存訂單後生成")),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("分支"))+" ID：",1),(0,a._)("td",Z,(0,n.zw)((0,o.SU)(_)["short_name"]),1),(0,a._)("td",null,"Debit Note "+(0,n.zw)(w.$t("日期"))+"：",1),(0,a._)("td",null,(0,n.zw)((0,o.SU)(p)),1)]),H,N]),(0,a._)("tbody",null,[(0,a._)("tr",x,[(0,a._)("td",null,(0,n.zw)(w.$t("項目")),1),(0,a._)("td",j,(0,n.zw)(w.$t("描述")),1),(0,a._)("td",null,(0,n.zw)(w.$t("單價")),1),(0,a._)("td",null,(0,n.zw)(w.$t("數量")),1),(0,a._)("td",null,(0,n.zw)(w.$t("金額"))+"($HKD)",1),(0,a._)("td",null,(0,n.zw)(w.$t("小計"))+"($HKD)",1)]),0===t.data.is_merge?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.data.storehouse_info,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("倉庫單元"))+" No.",1),(0,a._)("td",C,(0,n.zw)(t.name),1),(0,a._)("td",B,"$"+(0,n.zw)((0,o.SU)(b.Yu)(t.price)),1),(0,a._)("td",P,(0,n.zw)(e.data.update_price.month),1),(0,a._)("td",Q,"$"+(0,n.zw)((0,o.SU)(b.Yu)(t.price*e.data.update_price.month)),1),I]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("許可有效期")),1),(0,a._)("td",T,[e.data.update_price.license_start&&e.data.update_price.license_end?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.license_start)+" "+(0,n.zw)(w.$t("至"))+" "+(0,n.zw)(e.data.update_price.license_end),1)],64)):(0,a.kq)("",!0)]),F]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("免租")),1),(0,a._)("td",K,[e.data.update_price.free_start_time&&e.data.update_price.free_end_time?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.free_start_time)+" "+(0,n.zw)(w.$t("至"))+" "+(0,n.zw)(e.data.update_price.free_end_time),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $0.0 ")],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.free_month),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $0.0 ")],64)):(0,a.kq)("",!0)]),O]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("按金")),1),(0,a._)("td",A,(0,n.zw)(t.prepayment)+(0,n.zw)(w.$t("月許可費")),1),(0,a._)("td",null,"$ "+(0,n.zw)((0,o.SU)(b.Yu)(t.deposit)),1),E,(0,a._)("td",null,"$"+(0,n.zw)((0,o.SU)(b.Yu)(2*t.deposit)),1),M]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("折扣")),1),R,(0,a._)("td",null,[0!==c()?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(c()),1)],64)):(0,a.kq)("",!0)]),L,(0,a._)("td",null,[0!=s(t)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $"+(0,n.zw)((0,o.SU)(b.Yu)(s(t))),1)],64)):(0,a.kq)("",!0)]),G]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("優惠券")),1),J,(0,a._)("td",null,(0,n.zw)(d()),1),X,(0,a._)("td",null,[0!=u(t)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $"+(0,n.zw)((0,o.SU)(b.Yu)(u(t))),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,"$"+(0,n.zw)((0,o.SU)(b.Yu)(r(t))),1)]),ee,te],64)))),128)):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(l(),((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("倉庫單元"))+" No.",1),(0,a._)("td",le,(0,n.zw)(t.merge_name),1),(0,a._)("td",ae,"$"+(0,n.zw)((0,o.SU)(b.Yu)(t.merge_price)),1),ne,(0,a._)("td",oe,"$"+(0,n.zw)((0,o.SU)(b.Yu)(t.merge_price*t.merge_extent)),1),ie]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("許可有效期")),1),(0,a._)("td",re,[e.data.update_price.license_start&&e.data.update_price.license_end?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.license_start)+" "+(0,n.zw)(w.$t("至"))+" "+(0,n.zw)(e.data.update_price.license_end),1)],64)):(0,a.kq)("",!0)]),de]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("免租")),1),(0,a._)("td",ue,[e.data.update_price.free_start_time&&e.data.update_price.free_end_time?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.free_start_time)+" "+(0,n.zw)(w.$t("至"))+" "+(0,n.zw)(e.data.update_price.free_end_time),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $0.0 ")],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.data.update_price.free_month),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,[0!==e.data.update_price.free_month?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $0.0 ")],64)):(0,a.kq)("",!0)]),ce]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("押金")),1),(0,a._)("td",se,"2"+(0,n.zw)(w.$t("月許可費")),1),(0,a._)("td",null,"$ "+(0,n.zw)((0,o.SU)(b.Yu)(t.merge_deposit/2)),1),_e,(0,a._)("td",null,"$"+(0,n.zw)((0,o.SU)(b.Yu)(t.merge_deposit)),1),pe]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("折扣")),1),me,(0,a._)("td",null,[0!==c()?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(c()),1)],64)):(0,a.kq)("",!0)]),we,(0,a._)("td",null,[0!=s(t)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $"+(0,n.zw)((0,o.SU)(b.Yu)(s(t))),1)],64)):(0,a.kq)("",!0)]),ge]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("優惠券")),1),fe,(0,a._)("td",null,(0,n.zw)(d()),1),be,(0,a._)("td",null,[0!=u(t)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $"+(0,n.zw)((0,o.SU)(b.Yu)(u(t))),1)],64)):(0,a.kq)("",!0)]),(0,a._)("td",null,"$"+(0,n.zw)((0,o.SU)(b.Yu)(r(t))),1)]),ye,he],64)))),128))]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.data.smart_card_info,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(e.name),1),(0,a._)("td",ke,(0,n.zw)(e.card_no),1),(0,a._)("td",null,[0!==e.price?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)(" $"+(0,n.zw)((0,o.SU)(b.Yu)(e.price)),1)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)(" -")],64))]),ze,(0,a._)("td",null," $"+(0,n.zw)((0,o.SU)(b.Yu)(1*e.price+1*e.deposit+1*e.registration_fee)),1),$e])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.data.goods_info,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(e.name),1),Ue,(0,a._)("td",null,"$"+(0,n.zw)((0,o.SU)(b.Yu)(e.price)),1),(0,a._)("td",null,(0,n.zw)(e.num),1),(0,a._)("td",null," $"+(0,n.zw)((0,o.SU)(b.Yu)(e.price*e.num)),1),Ve])))),128)),ve,qe,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.discount_smart_card,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(e.name),1),We,(0,a._)("td",null,[0===e.price?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,n.zw)(e.discount_price),1)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)(" -")],64))]),Ye,De,Se])))),128)),(0,a._)("tr",null,[(0,a._)("td",Ze,(0,n.zw)(w.$t("支付方式")),1),(0,a._)("td",null,(0,n.zw)(w.$t("小計")),1),(0,a._)("td",null,"$"+(0,n.zw)(i()),1)]),(0,a._)("tr",null,[(0,a._)("td",He,(0,n.zw)((0,o.SU)(m)["label"]),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("押金")),1),(0,a._)("td",null,"$ "+(0,n.zw)((0,o.SU)(b.Yu)(e.data.update_price.deposit)),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("預訂定金已付")),1),(0,a._)("td",null,"$ "+(0,n.zw)(-(0,o.SU)(b.Yu)(e.data.update_price.front_money)),1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,n.zw)(w.$t("總金額")),1),(0,a._)("td",null,"$ "+(0,n.zw)((0,o.SU)(b.Yu)(e.data.update_price.total_price)),1)])])]))}};var xe=l(1639);const je=(0,xe.Z)(Ne,[["__scopeId","data-v-65bd4504"]]),Ce=je;var Be=l(9226),Pe=l(8339),Qe=l(7712),Ie=l(3062);const Te={class:"text-h5"},Fe={class:"q-col-gutter-md"},Ke={class:"row q-gutter-sm"},Oe={class:"row q-gutter-sm"},Ae={class:"row q-col-gutter-x-md"},Ee={class:"required"},Me={class:"required"},Re={class:"col-2"},Le={class:"q-col-gutter-md"},Ge={key:0},Je={class:"row items-center"},Xe={class:"text-subtitle1 q-ml-md"},et={class:"col"},tt={class:"col"},lt={class:"row items-center"},at={class:"text-subtitle1 q-mr-md"},nt={class:"q-col-gutter-md"},ot={class:"row items-center"},it={class:"text-subtitle1 q-ml-md"},rt={class:"text-h5"},dt={class:"text-subtitle1"},ut={class:"text-subtitle1"},ct={class:"q-col-gutter-md"},st={class:"row"},_t={style:{flex:"0 0 6em"}},pt={class:"row"},mt={style:{flex:"0 0 6em"}},wt={class:"row"},gt={class:"q-gutter-sm"},ft=["data"],bt={class:"row col-4 q-gutter-sm"},yt={__name:"Add",setup(e){const t=(0,Pe.tv)(),l=(0,Pe.yj)(),{t:w}=(0,Qe.QT)(),g=(0,a.f3)("post"),f=(0,a.f3)("upfile"),b=(0,o.iH)(!1),y=(0,o.qj)({is_merge:0,search_info:"",quote_id:"",customer:{id:"",type:0,code:"",client_register_name:"",client_id_code:"",client_address:"",client_phone:"",client_telephone:"",client_email:"",whatsapp:"",client_bank_name:"",client_account:"",client_account_name:"",contact_ename:"",contact_name:"",contact_id_code:"",contact_address:"",contact_phone:"",contact_telephone:"",contact_email:"",id_code_file:[],address_identify:[],declare_url:[],other_url:[],br_url:[],company_seal_url:[],client_company_ename:"",client_company_name:"",client_contact_ename:"",client_contact_name:"",client_certificate:"",client_due_date:"",client_register_ename:"",client_contact_position:""},storehouse_info:[],merge_storehouse_info:[],smart_card_info:[],goods_info:[],update_price:{discount:0,discount_type:1,deposit:0,discount_id:"",license_num:1,license_start:"",license_end:"",license_date:[{start:"",end:"",price:""}],select_payment:"",declare_form:"",contract_type:"",remark_info:[],total_price:0,discount_price:0,month:1,coupon_price:0,free_start_time:"",free_end_time:"",front_money:"",free_month:0,coupon_type:"",coupon:""}}),h=(0,o.qj)({step:2,customer:[],quote:[],coupon:[],payment:[],deposit:""}),k=(0,o.qj)({rows:y.goods_info,columns:[{name:"name",label:w("物品"),align:"center"},{name:"num",label:w("數量"),align:"center"},{name:"price",label:w("價格"),align:"center"}]}),z=(0,o.iH)(),$=(0,o.iH)(),U=async()=>{let e;switch(h.step){case 1:if(e=await z.value.validate(),!y.customer)return i.Z.create({message:w("請選擇客戶"),position:"top",color:"negative"});if(y.customer.type){if(!y.customer.client_company_ename)return i.Z.create({message:w("請填寫公司名稱"),position:"top",color:"negative"})}else if(!y.customer.client_register_ename||!y.customer.code||!y.customer.client_phone)return i.Z.create({message:w("請選擇客戶"),position:"top",color:"negative"});if(e)return h.step=2;V();break;case 2:if(e=await $.value.validate(),!e)return V();if(y.storehouse_info.length<1)return i.Z.create({message:w("請選擇倉庫"),position:"top",color:"negative"});h.step=3;break}},V=()=>{let e=document.activeElement?.offsetParent.getBoundingClientRect();e&&window.scrollTo({top:e.top-e.height+document.documentElement.scrollTop-10,behavior:"smooth"})};(0,a.bv)((()=>{j(),F()}));let v=(0,o.iH)([]);const q=e=>{v.value=e},W=e=>{y.merge_storehouse_info!==e&&(y.merge_storehouse_info=e,y.is_merge=1)},Y=e=>{e||(y.update_price.coupon_price=0)},D=e=>{for(const n in e)Object.hasOwn(y.customer,n)&&(y.customer[n]=e[n]);const{id:t,type:l}=e;y.search_info=t,e["name"]=0===l?e.client_register_ename:e.client_company_ename;const a=h.customer.findIndex((e=>e.id===t));a<0?h.customer.push(e):h.customer[a]=e},S=e=>{k.rows=e.filter((e=>e.discount_num>0))},Z=(e,t)=>{if(""===String(e).trim())return t((()=>{}));g("/quote/customer_info",{name:e},(e=>{"success"===e.status&&t((()=>{h.customer=e.info}))}))},H=(e,t)=>{if(""===String(e).trim())return t((()=>{}));let l=y.customer.id||"";g("/orders/quote_info",{name:e,customer_id:l},(e=>{"success"===e.status&&t((()=>{h.quote=e.info}))}))},N=(e,t)=>{if(""===String(e).trim())return t((()=>{}));g("/orders/discount_info",{code:e},(e=>{"success"===e.status&&t((()=>{h.coupon=e.info}))}))},x=e=>{const t=h.customer.find((t=>t.id===e));for(const l in t)y.customer[l]=t[l]},j=()=>{g("/orders/payment_info",{},(e=>{if("success"===e.status){if(e.info.length<1)return;h.payment=e.info,y.update_price.select_payment=e.info[0].value}else i.Z.create({message:e.message,position:"top",color:"negative"})}))},C=(e,t,l)=>{const a=new FormData;e instanceof Array?e.forEach(((e,t)=>{a.append(`file[${t}]`,e)})):a.append("file",e),f("/upload/upload",a,(function(e){try{e=JSON.parse(e)}catch(a){}"success"===e.status?t({value:e.info,date:e["new_name"]}):l()}))},B=()=>{g("/orders/add_order",y,(e=>{"success"===e.status?(t.replace("/order"),i.Z.create({message:e.message,position:"top",color:"positive"})):i.Z.create({message:e.message,position:"top",color:"negative"})}))},P=(0,o.qj)({visible:!1}),Q=e=>{const t={};for(const l in e)Object.hasOwn(y.customer,l)&&(t[l]=e[l]);t.id=e.id,t.name=0===e.type?t.client_register_ename:t.client_company_ename,h.customer.push(t),y.search_info=e.id,x(e.id),P.visible=!1},I=e=>{e.target.value<0&&(e.target.value=0),y.update_price.deposit=e.target.value},T=e=>{e.target.value<0&&(e.target.value=0)},F=()=>{let e=l.params.id;e&&"0"!==e&&(e=e.split(","),K(e))},K=e=>{g("/quote/mapselected",e,(e=>{"success"==e.status&&(y.storehouse_info=e.info.map((e=>({...e,prepayment:1,deposit:Number(e.price)||0}))),ee(y.storehouse_info))}))},O=(0,o.qj)({loading:!1,url:"",visible:!1}),A=()=>{O.loading=!0;const e=sessionStorage.getItem("name"),t=sessionStorage.getItem("storehouse_name_id");y.user_name=e,y.storehouse_name_id=t,g("/orders/preview_order_pdf",y,(e=>{"success"===e.status?(O.url=e.info["pdfurl"],O.loading=!1,O.visible=!0):i.Z.create({message:w("預覽失敗"),position:"top",color:"negative"})}))},E=e=>{g("/orders/quote_storehouse",{id:e},(e=>{if("success"===e.status){if(e.info.length<1)return;y.storehouse_info=e.info.map((e=>({...e,deposit:e.price*e.prepayment}))),ee(y.storehouse_info)}else i.Z.create({message:e.message,position:"top",color:"negative"})}))},M=(0,o.qj)({visible:!1,form:{order_num:"",create_time:""},table:{rows:[],columns:[{name:"id",label:"ID",align:"center",sortable:!0},{name:"order_num",label:w("報價單編號"),align:"center",sortable:!0},{name:"client_ename",label:w("客戶名稱"),align:"center"},{name:"client_telephone",label:w("聯繫電話"),align:"center",sortable:!0},{name:"create_time",label:w("建立時間"),align:"center",sortable:!0},{name:"operate",label:w("操作"),align:"center"}],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}}}),R=()=>{M.visible=!0,L({pagination:M.table.pagination})},L=({pagination:e})=>{let{page:t,rowsPerPage:l,sortBy:a,descending:n}=e;const o={page:t,page_size:l,sort_name:a,sort_order:n?0:1,search_info:M.form,customer_id:y.customer.id};g("/orders/quote_list",o,(e=>{"success"===e.status?(M.table.rows=e.info,M.table.pagination.rowsNumber=e?.pager?.p_rows??0,M.table.pagination.page=t,M.table.pagination.rowsPerPage=l,M.table.pagination.sortBy=a,M.table.pagination.descending=n):i.Z.create({message:e.message,position:"top",color:"negative"})}))},G=e=>{g("/orders/quote_storehouse_info",{id:e.id},(t=>{h.quote.push(e),y.quote_id=e.id,y.storehouse_info=t.info.quote_storehouse,y.update_price.discount=t.info.discount,y.update_price.deposit=t.info.deposit,y.update_price.remark_info=t.info.quote_remarks,y.update_price.deposit=y.storehouse_info.reduce(((e,t)=>e+Number(t.deposit)),0),M.visible=!1}))},J=()=>{M.table.pagination.page=1,L({pagination:M.table.pagination})},X=()=>{M.form.order_num=M.form.create_time="",M.table.pagination.page=1,L({pagination:M.table.pagination})};(0,a.YP)([()=>y.update_price.free_start_time,()=>y.update_price.free_end_time],(([e,t])=>{let l;if(e&&t){const a=Math.abs(new Date(t).getTime()-new Date(e).getTime()),n=a/864e5;l=Math.ceil(n/30),y.update_price.free_month=l}else l=0}),{deep:!0});const ee=e=>{y.update_price.deposit=e.reduce(((e,t)=>e+Number(2*t.deposit)),0)},te=e=>{const t=y.update_price.license_date[0];t&&(e>le&&(e=le,y.update_price.front_money=le),t.price=(le-e).toFixed(1),y.update_price.total_price=ae-e)};(0,a.YP)([()=>y.update_price.license_date],(()=>{y.update_price.total_price=y.update_price.license_date.reduce(((e,t)=>e+Number(t.price)),0)}),{deep:!0}),(0,a.YP)([()=>y.update_price.license_start,()=>y.update_price.license_end],(([e,t])=>{let l;if(e&&t){const a=Math.abs(new Date(t).getTime()-new Date(e).getTime()),n=a/864e5;l=Math.ceil(n/30),0===l&&(l=1)}else l=1;y.update_price.month=l,y.update_price.license_num=l,ne()}));let le=0,ae=0;(0,a.YP)([()=>y.update_price.license_num],(([e])=>{if(!y.update_price.license_num)return y.update_price.license_date=[{start:"",end:"",price:""}];y.update_price.license_num=e,ne()})),(0,a.YP)([()=>y.storehouse_info,()=>y.smart_card_info,()=>y.goods_info],(()=>{ne()}),{deep:!0}),(0,a.YP)([()=>y.update_price.discount,()=>y.update_price.discount_id,()=>y.update_price.discount_type],(()=>{ne()})),(0,a.YP)((()=>y.merge_storehouse_info),(()=>{if(y.merge_storehouse_info.length<=0)return y.is_merge=0;ne()}),{deep:!0});const ne=()=>{const e=y.update_price.license_num;let t;t=0===y.is_merge?y.storehouse_info.reduce(((e,t)=>e+Number(t.price)),0):y.merge_storehouse_info.reduce(((e,t)=>e+Number(t.merge_extent)*Number(t.merge_price)),0);const l=t*y.update_price.month,a=y.storehouse_info.reduce(((e,t)=>e+2*Number(t.price)),0),n=y.smart_card_info.reduce(((e,t)=>e+Number(t.price)),0),o=y.smart_card_info.reduce(((e,t)=>e+Number(t.deposit)),0),i=y.smart_card_info.reduce(((e,t)=>e+Number(t.registration_fee)),0),r=n+o+i,d=y.goods_info.reduce(((e,t)=>e+(Number(t.price)*Number(t.num)-Number(t.price)*Number(t.discount_num))),0);let u=-Number(y.update_price.discount)||0;2===y.update_price.discount_type?(u>100&&(u=100),u<-100&&(u=-100),y.update_price.discount_price=l*(u/100)):y.storehouse_info.length<=0?y.update_price.discount_price=0:y.update_price.discount_price=l<Number(y.update_price.discount)?-l:u;let c=l+y.update_price.discount_price;const s=y.update_price.discount_id;if(""!==s){const e=h.coupon.find((e=>e.id===y.update_price.discount_id));if(e){let t;const l=e.type;y.update_price.coupon_type=l,y.update_price.coupon=e.price,1===l?t=c*e.price/100:(t=e.price,c<=0&&(t=0)),y.update_price.coupon_price=-t}}const _=l+y.update_price.discount_price+y.update_price.coupon_price,p=_/e;let m=p+a+r+d;le=m,m-=y.update_price.front_money,m<0&&(m=0);const w=_/e,g=[];g.push({start:"",end:"",price:m.toFixed(1)});for(let f=1;f<e;f++)g.push({start:"",end:"",price:w.toFixed(1)});y.update_price.license_date=g,y.update_price.total_price=m+w*(e-1),ae=le+w*(e-1)};return(e,t)=>{const l=(0,a.up)("q-card-section"),i=(0,a.up)("q-icon"),w=(0,a.up)("q-select"),g=(0,a.up)("q-btn"),f=(0,a.up)("q-form"),V=(0,a.up)("q-step"),j=(0,a.up)("q-input"),F=(0,a.up)("Date"),K=(0,a.up)("q-btn-toggle"),le=(0,a.up)("q-th"),ae=(0,a.up)("q-tr"),ne=(0,a.up)("q-td"),oe=(0,a.up)("q-table"),ie=(0,a.up)("q-option-group"),re=(0,a.up)("q-stepper-navigation"),de=(0,a.up)("q-stepper"),ue=(0,a.up)("q-card"),ce=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(ce,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a._)("div",Te,(0,n.zw)(e.$t("建立訂單")),1)])),_:1}),(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(de,{modelValue:h.step,"onUpdate:modelValue":t[24]||(t[24]=e=>h.step=e),color:"primary",animated:""},{navigation:(0,a.w5)((()=>[(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a._)("div",gt,[h.step<3?((0,a.wg)(),(0,a.j4)(g,{key:0,color:"primary",onClick:U},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("下一頁")),1)])),_:1})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(g,{color:"primary",onClick:B,loading:b.value},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("儲存")),1)])),_:1},8,["loading"]),(0,a.Wm)(g,{color:"info",onClick:A},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("預覽PDF")),1)])),_:1})],64)),h.step>1?((0,a.wg)(),(0,a.j4)(g,{key:2,onClick:t[23]||(t[23]=e=>h.step--)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("返回")),1)])),_:1})):(0,a.kq)("",!0)])])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(V,{name:1,title:e.$t("客戶的資料"),icon:"settings",done:h.step>1},{default:(0,a.w5)((()=>[(0,a._)("div",Fe,[(0,a._)("div",Ke,[(0,a.Wm)(w,{dense:"",outlined:"",modelValue:y.search_info,"onUpdate:modelValue":[t[0]||(t[0]=e=>y.search_info=e),x],"map-options":"","use-input":"","emit-value":"","option-value":"id","option-label":"name",options:h.customer,onFilter:Z,label:e.$t("搜索客戶"),style:{width:"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"search"})])),_:1},8,["modelValue","options","label"]),(0,a.Wm)((0,o.SU)(Ie.Z),{onSelected:D,isQuote:0}),(0,a.Wm)(g,{color:"primary",onClick:t[1]||(t[1]=e=>P.visible=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.$t("新客戶")),1)])),_:1})]),(0,a.Wm)(f,{ref_key:"formRef1",ref:z},{default:(0,a.w5)((()=>[(0,a.Wm)(c.Z,{modelValue:y.customer,"onUpdate:modelValue":t[2]||(t[2]=e=>y.customer=e),"remote-method":C},null,8,["modelValue"])])),_:1},512)])])),_:1},8,["title","done"]),(0,a.Wm)(V,{name:2,title:e.$t("訂單詳情"),icon:"create_new_folder",done:h.step>2},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"q-col-gutter-md",ref_key:"formRef2",ref:$},{default:(0,a.w5)((()=>[(0,a._)("div",Oe,[(0,a.Wm)(w,{dense:"",outlined:"",modelValue:y.quote_id,"onUpdate:modelValue":[t[3]||(t[3]=e=>y.quote_id=e),E],"emit-value":"","map-options":"","use-input":"","option-value":"id","option-label":"order_num",options:h.quote,onFilter:H,label:e.$t("選擇報價"),style:{width:"250px"}},{append:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"search"})])),_:1},8,["modelValue","options","label"]),(0,a.Wm)(g,{color:"primary",label:e.$t("選擇報價單"),onClick:R},null,8,["label"])]),(0,a.Wm)(s.Z,{modelValue:y.storehouse_info,"onUpdate:modelValue":[t[4]||(t[4]=e=>y.storehouse_info=e),ee],discount:y.update_price.discount,onMergeInfo:W,mergeInitialize:y.merge_storehouse_info},null,8,["modelValue","discount","mergeInitialize"]),(0,a._)("div",Ae,[(0,a.Wm)(j,{type:"date",outlined:"",dense:"",modelValue:y.update_price.license_start,"onUpdate:modelValue":t[5]||(t[5]=e=>y.update_price.license_start=e),"stack-label":"","label-slot":"",rules:[t=>t&&t.length>0||e.$t("請選擇開始合約時段")],class:"col-6"},{label:(0,a.w5)((()=>[(0,a._)("span",Ee,(0,n.zw)(e.$t("合約時段")),1)])),_:1},8,["modelValue","rules"]),(0,a.Wm)(j,{type:"date",outlined:"",dense:"",modelValue:y.update_price.license_end,"onUpdate:modelValue":t[6]||(t[6]=e=>y.update_price.license_end=e),"stack-label":"","label-slot":"",rules:[t=>t&&t.length>0||e.$t("請選擇結束合約時段")],class:"col-6"},{label:(0,a.w5)((()=>[(0,a._)("span",Me,(0,n.zw)(e.$t("至")),1)])),_:1},8,["modelValue","rules"]),(0,a.Wm)(F,{outlined:"",dense:"",modelValue:y.update_price.free_start_time,"onUpdate:modelValue":t[7]||(t[7]=e=>y.update_price.free_start_time=e),"stack-label":"","label-slot":"",label:e.$t("免費時段"),class:"col-6"},null,8,["modelValue","label"]),(0,a.Wm)(F,{outlined:"",dense:"",modelValue:y.update_price.free_end_time,"onUpdate:modelValue":t[8]||(t[8]=e=>y.update_price.free_end_time=e),"stack-label":"","label-slot":"",label:e.$t("至"),class:"col-6"},null,8,["modelValue","label"])]),(0,a.Wm)(j,{class:"col-12",modelValue:y.update_price.license_num,"onUpdate:modelValue":t[9]||(t[9]=e=>y.update_price.license_num=e),outlined:"",dense:"",clearable:"",label:e.$t("合約期數"),type:"number"},null,8,["modelValue","label"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.update_price.license_date,((l,n)=>((0,a.wg)(),(0,a.iD)("div",{class:"row col-12 q-col-gutter-md q-mt-none items-center",key:n},[(0,a.Wm)(F,{modelValue:l.start,"onUpdate:modelValue":e=>l.start=e,class:"col-5",label:e.$t("日期"),outlined:"",dense:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a.Wm)(F,{modelValue:l.end,"onUpdate:modelValue":e=>l.end=e,class:"col-5",label:e.$t("至"),outlined:"",dense:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a._)("div",Re,[(0,a.Wm)(j,{dense:"",outlined:"",modelValue:l.price,"onUpdate:modelValue":e=>l.price=e,label:e.$t("價格"),onBlur:t[10]||(t[10]=e=>T(e))},null,8,["modelValue","onUpdate:modelValue","label"])])])))),128)),(0,a._)("div",Le,[((0,a.wg)(),(0,a.iD)("div",Ge,[(0,a.Wm)(K,{modelValue:y.update_price.discount_type,"onUpdate:modelValue":t[11]||(t[11]=e=>y.update_price.discount_type=e),options:[{label:e.$t("固定金額"),value:1},{label:e.$t("百分比"),value:2}]},null,8,["modelValue","options"])])),(0,a._)("div",Je,[1===y.update_price.discount_type?((0,a.wg)(),(0,a.j4)(j,{key:0,type:"number",dense:"",outlined:"",modelValue:y.update_price.discount,"onUpdate:modelValue":t[12]||(t[12]=e=>y.update_price.discount=e),label:e.$t("折扣"),class:"col",style:{"max-width":"600px"}},null,8,["modelValue","label"])):((0,a.wg)(),(0,a.j4)(j,{key:1,type:"number",dense:"",outlined:"",modelValue:y.update_price.discount,"onUpdate:modelValue":t[13]||(t[13]=e=>y.update_price.discount=e),label:e.$t("折扣")+"(%OFF)",class:"col",style:{"max-width":"600px"}},null,8,["modelValue","label"])),(0,a._)("span",Xe,"$"+(0,n.zw)(e.fmtCurrency(y.update_price.discount_price)),1)]),(0,a._)("div",et,[(0,a.Wm)(j,{type:"number",dense:"",outlined:"",modelValue:y.update_price.deposit,"onUpdate:modelValue":t[14]||(t[14]=e=>y.update_price.deposit=e),onBlur:I,label:e.$t("按金"),style:{"max-width":"600px"}},null,8,["modelValue","label"])]),(0,a._)("div",tt,[(0,a.Wm)(j,{type:"number",dense:"",outlined:"",modelValue:y.update_price.front_money,"onUpdate:modelValue":[t[15]||(t[15]=e=>y.update_price.front_money=e),te],label:e.$t("定金"),style:{"max-width":"600px"}},null,8,["modelValue","label"])])]),(0,a.Wm)((0,o.SU)(_.Z),{modelValue:y.smart_card_info,"onUpdate:modelValue":t[16]||(t[16]=e=>y.smart_card_info=e),onDiscountSmartCard:q,discount_smart_card:(0,o.SU)(v)},null,8,["modelValue","discount_smart_card"]),(0,a.Wm)((0,o.SU)(p.Z),{modelValue:y.goods_info,"onUpdate:modelValue":[t[17]||(t[17]=e=>y.goods_info=e),S]},null,8,["modelValue"]),(0,a._)("div",lt,[(0,a._)("div",at,(0,n.zw)(e.$t("優惠商品")),1)]),(0,a.Wm)(oe,{flat:"","row-key":"id","hide-bottom":"",rows:k.rows,columns:k.columns,pagination:{rowsPerPage:0}},{header:(0,a.w5)((e=>[(0,a.Wm)(ae,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(t=>((0,a.wg)(),(0,a.j4)(le,{align:"center",key:t.name,props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((t=>[((0,a.wg)(),(0,a.j4)(ae,{props:t,key:t.row.id},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.name),1)])),_:2},1024),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.discount_num),1)])),_:2},1024),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)("$"+(0,n.zw)(e.fmtCurrency(t.row.price*t.row.discount_num)),1)])),_:2},1024)])),_:2},1032,["props"]))])),_:1},8,["rows","columns"]),(0,a._)("div",nt,[(0,a._)("div",ot,[(0,a.Wm)(w,{dense:"",outlined:"",modelValue:y.update_price.discount_id,"onUpdate:modelValue":[t[18]||(t[18]=e=>y.update_price.discount_id=e),Y],"emit-value":"","map-options":"","use-input":"","option-value":"id","option-label":"title",options:h.coupon,onFilter:N,style:{width:"600px"},label:e.$t("優惠券")},{append:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"search"})])),_:1},8,["modelValue","options","label"]),(0,a._)("span",it,"$"+(0,n.zw)(e.fmtCurrency(y.update_price.coupon_price)),1)]),(0,a._)("div",rt,"共計: $"+(0,n.zw)(e.fmtCurrency(y.update_price.total_price)),1),(0,a._)("div",null,[(0,a._)("div",dt,(0,n.zw)(e.$t("支付方式")),1),(0,a.Wm)(ie,{inline:"",modelValue:y.update_price.select_payment,"onUpdate:modelValue":t[19]||(t[19]=e=>y.update_price.select_payment=e),options:h.payment,color:"primary"},null,8,["modelValue","options"])]),(0,a._)("div",ut,(0,n.zw)(e.$t("其他")),1),(0,a._)("div",null,[(0,a._)("div",ct,[(0,a._)("div",st,[(0,a._)("span",_t,(0,n.zw)(e.$t("申報表"))+":",1),(0,a.Wm)((0,o.SU)(d.Z),{modelValue:y.update_price.declare_form,"onUpdate:modelValue":t[20]||(t[20]=e=>y.update_price.declare_form=e),multiple:"",accept:"*","remote-method":C},null,8,["modelValue"])]),(0,a._)("div",pt,[(0,a._)("span",mt,(0,n.zw)(e.$t("協議的形式"))+":",1),(0,a.Wm)((0,o.SU)(d.Z),{modelValue:y.update_price.contract_type,"onUpdate:modelValue":t[21]||(t[21]=e=>y.update_price.contract_type=e),multiple:"",accept:"*","remote-method":C},null,8,["modelValue"])])])]),(0,a._)("div",wt,[(0,a.Wm)((0,o.SU)(m.Z),{modelValue:y.update_price.remark_info,"onUpdate:modelValue":t[22]||(t[22]=e=>y.update_price.remark_info=e),class:"col-6"},null,8,["modelValue"])])])])),_:1},512)])),_:1},8,["title","done"]),(0,a.Wm)(V,{name:3,title:e.$t("確認訂單"),icon:"add_comment"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(Ce),{data:y,options:h,discount_smart_card:(0,o.SU)(v)},null,8,["data","options","discount_smart_card"])])),_:1},8,["title"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)((0,o.SU)(r.Z),{modelValue:P.visible,"onUpdate:modelValue":t[25]||(t[25]=e=>P.visible=e),title:e.$t("新增客戶")},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(Be["default"]),{quicky:"",style:{width:"75vw"},prop:P.form,onAdd:Q},null,8,["prop"])])),_:1},8,["modelValue","title"]),(0,a.Wm)((0,o.SU)(r.Z),{modelValue:O.visible,"onUpdate:modelValue":t[26]||(t[26]=e=>O.visible=e),title:e.$t("預覽")+"PDF"},{default:(0,a.w5)((()=>[(0,a._)("object",{data:e.resolveAssetsURL(O.url),type:"application/pdf",style:{width:"90vw",height:"80vh","max-width":"1200px"}},null,8,ft)])),_:1},8,["modelValue","title"]),(0,a.Wm)((0,o.SU)(r.Z),{modelValue:M.visible,"onUpdate:modelValue":t[31]||(t[31]=e=>M.visible=e),title:e.$t("選擇報價單")},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row q-col-gutter-md q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{dense:"",outlined:"",modelValue:M.form.order_num,"onUpdate:modelValue":t[27]||(t[27]=e=>M.form.order_num=e),label:e.$t("報價單號"),class:"col-4"},null,8,["modelValue","label"]),(0,a.Wm)(j,{dense:"",outlined:"",modelValue:M.form.create_time,"onUpdate:modelValue":t[28]||(t[28]=e=>M.form.create_time=e),label:e.$t("創建時間"),class:"col-4"},null,8,["modelValue","label"]),(0,a._)("div",bt,[(0,a.Wm)(g,{color:"primary",label:e.$t("搜索"),onClick:J},null,8,["label"]),(0,a.Wm)(g,{label:e.$t("重置"),onClick:X},null,8,["label"])])])),_:1}),(0,a.Wm)(oe,{flat:"",rows:M.table.rows,columns:M.table.columns,"row-key":"id",pagination:M.table.pagination,"onUpdate:pagination":t[30]||(t[30]=e=>M.table.pagination=e),selection:"multiple","binary-state-sort":"",onRequest:L},{header:(0,a.w5)((e=>[(0,a.Wm)(ae,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(t=>((0,a.wg)(),(0,a.j4)(le,{key:t.name,props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((t=>[(0,a.Wm)(ae,{props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.id),1)])),_:2},1024),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.order_num),1)])),_:2},1024),1===t.row.type?((0,a.wg)(),(0,a.j4)(ne,{key:0,align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.client_company_ename),1)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(ne,{key:1,align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.client_register_ename),1)])),_:2},1024)),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.client_telephone),1)])),_:2},1024),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.row.create_time),1)])),_:2},1024),(0,a.Wm)(ne,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{color:"primary",label:e.$t("選擇"),onClick:e=>G(t.row)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,a.w5)((e=>[(0,a.Wm)((0,o.SU)(u.Z),{modelValue:M.table.pagination,"onUpdate:modelValue":[t[29]||(t[29]=e=>M.table.pagination=e),L]},null,8,["modelValue"])])),_:1},8,["rows","columns","pagination"])])),_:1},8,["modelValue","title"])])),_:1})}}};var ht=l(9885),kt=l(4458),zt=l(3190),$t=l(8225),Ut=l(6017),Vt=l(2259),vt=l(2857),qt=l(8879),Wt=l(8326),Yt=l(6611),Dt=l(1389),St=l(9497),Zt=l(3532),Ht=l(1682),Nt=l(7220),xt=l(2286),jt=l(1992),Ct=l(9984),Bt=l.n(Ct);const Pt=yt,Qt=Pt;Bt()(yt,"components",{QPage:ht.Z,QCard:kt.Z,QCardSection:zt.Z,QStepper:$t.Z,QStep:Ut.Z,QSelect:Vt.Z,QIcon:vt.Z,QBtn:qt.Z,QForm:Wt.Z,QInput:Yt.Z,QBtnToggle:Dt.Z,QTable:St.Z,QTr:Zt.Z,QTh:Ht.Z,QTd:Nt.Z,QOptionGroup:xt.Z,QStepperNavigation:jt.Z})}}]);