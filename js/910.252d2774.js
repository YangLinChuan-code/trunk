"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[910],{4496:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});var t=l(9835),n=l(6970),o=l(499),s=l(7712),i=(l(9665),l(8339)),r=l(9185),c=l(6827);const u={class:"q-gutter-y-lg"},m={class:"row q-col-gutter-x-xl"},p={class:"row q-gutter-x-lg"},d={__name:"StockList",setup(e){const{t:a}=(0,s.QT)(),l=(0,i.tv)(),d=(0,t.f3)("post");let g=(0,o.qj)([]),w=(0,o.qj)({category:"",name:""});const _=(0,o.qj)({columns:[{name:"item",label:a("物品"),align:"center"},{name:"category_id",label:a("種類"),align:"center",sortable:!0},{name:"stock",label:a("庫存"),align:"center",sortable:!0},{name:"price",label:a("價格"),align:"center",sortable:!0},{name:"registration_fee",label:a("登記費用"),align:"center",sortable:!0},{name:"deposit",label:a("押金"),align:"center",sortable:!0},{name:"operate",label:a("操作"),align:"center"}],rows:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}});(0,t.bv)((()=>{b({pagination:_.pagination}),k()}));const b=({pagination:e})=>{let{page:a,rowsPerPage:l,sortBy:t,descending:n}=e;const o={page:a,page_size:l,sort_name:t,sort_order:n?0:1,form:w};d("/stock/stock_list",o,(e=>{"success"===e.status?(_.rows=e.info,_.pagination.rowsNumber=e?.pager?.p_rows??0,_.pagination.page=a,_.pagination.rowsPerPage=l,_.pagination.sortBy=t,_.pagination.descending=n):c.Z.create({message:e.message,position:"top",color:"negative"})}))},k=()=>{d("/stock/category_info",{},(e=>{"success"===e.status?g=e.info:c.Z.create({message:e.message,position:"top",color:"negative"})}))},f=()=>{_.pagination.page=1,_.pagination.rowsNumber=0,_.pagination.sortBy="id",_.pagination.descending=!1,b({pagination:_.pagination})},W=()=>{w.sort="0",w.name=w.category="",_.pagination.page=1,_.pagination.rowsNumber=0,_.pagination.sortBy="id",_.pagination.descending=!1,f()},y=e=>{l.push(`/stock/edit/${e}`)};return(e,a)=>{const l=(0,t.up)("q-select"),s=(0,t.up)("q-input"),i=(0,t.up)("q-btn"),c=(0,t.up)("q-th"),d=(0,t.up)("q-tr"),k=(0,t.up)("q-td"),q=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",m,[(0,t.Wm)(l,{class:"col-5","emit-value":"","map-options":"",aoutlined:"",dense:"",clearable:"",modelValue:(0,o.SU)(w).category,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.SU)(w).category=e),options:(0,o.SU)(g),label:e.$t("種類")},null,8,["modelValue","options","label"]),(0,t.Wm)(s,{class:"col-5",modelValue:(0,o.SU)(w).name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.SU)(w).name=e),outlined:"",dense:"",clearable:"",label:e.$t("物品")},null,8,["modelValue","label"])]),(0,t._)("div",p,[(0,t.Wm)(i,{color:"primary",onClick:f,label:e.$t("搜索")},null,8,["label"]),(0,t.Wm)(i,{outline:"",color:"dark",onClick:W,label:e.$t("重置")},null,8,["label"])]),(0,t._)("div",null,[(0,t.Wm)(q,{flat:"",rows:_.rows,columns:_.columns,"row-key":"id",pagination:_.pagination,"onUpdate:pagination":a[2]||(a[2]=e=>_.pagination=e),selection:"multiple",selected:_.selected,"onUpdate:selected":a[3]||(a[3]=e=>_.selected=e),"binary-state-sort":"",onRequest:b},{header:(0,t.w5)((e=>[(0,t.Wm)(d,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(a=>((0,t.wg)(),(0,t.j4)(c,{key:a.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.name),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.category_name),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.stock),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,n.zw)(e.fmtCurrency(a.row.price)),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,n.zw)(e.fmtCurrency(a.row.registration_fee)),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,n.zw)(e.fmtCurrency(a.row.deposit)),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{color:"primary",label:e.$t("編輯"),onClick:e=>y(a.row.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((e=>[(0,t.Wm)((0,o.SU)(r.Z),{modelValue:e.pagination,"onUpdate:modelValue":[a=>e.pagination=a,b]},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","columns","pagination","selected"])])])}}};var g=l(2259),w=l(6611),_=l(8879),b=l(9497),k=l(3532),f=l(1682),W=l(7220),y=l(9984),q=l.n(y);const U=d,v=U;q()(d,"components",{QSelect:g.Z,QInput:w.Z,QBtn:_.Z,QTable:b.Z,QTr:k.Z,QTh:f.Z,QTd:W.Z});const V={class:"q-gutter-y-lg"},Z={class:"row q-col-gutter-x-xl"},Q={class:"row q-col-gutter-x-xl"},S={class:"row q-gutter-x-lg"},z={class:"q-gutter-y-lg"},T={__name:"StockHistory",setup(e){const{t:a}=(0,s.QT)(),l=(0,t.f3)("post");let i=(0,o.iH)([]);const u=(0,o.qj)({columns:[{name:"name",label:a("物品"),align:"center"},{name:"category_name",label:a("種類"),align:"center"},{name:"action",label:a("行為"),align:"center"},{name:"staff",label:a("人員"),align:"center"},{name:"create_time",label:a("日期"),align:"center"}],rows:[],pagination:{page:1,pageSize:10,total:0}}),m=(0,o.qj)({category_id:"",name:"",start_time:"",end_time:""});(0,t.bv)((()=>{p(),d()}));const p=()=>{const{page:e,pageSize:a}=u.pagination,t={page:e,page_size:a,search_info:m};l("/stock/stock_record",t,(e=>{"success"===e.status?(u.rows=e.info,u.pagination.total=e?.pager?.p_rows??0):c.Z.create({message:e.message,position:"top",color:"negative"})}))},d=()=>{l("/stock/category_info",{},(e=>{"success"===e.status?i.value=e.info:c.Z.create({message:e.message,position:"top",color:"negative"})}))},g=()=>{u.pagination.page=1,p()},w=()=>{m.category_id=m.name=m.start_time=m.end_time="",g()};return(e,a)=>{const l=(0,t.up)("q-select"),s=(0,t.up)("q-input"),c=(0,t.up)("date"),d=(0,t.up)("q-btn"),_=(0,t.up)("q-th"),b=(0,t.up)("q-tr"),k=(0,t.up)("q-td"),f=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",V,[(0,t._)("div",Z,[(0,t.Wm)(l,{class:"col-5",outlined:"",dense:"",clearable:"",options:(0,o.SU)(i),"map-options":"","emit-value":"",modelValue:m.category_id,"onUpdate:modelValue":a[0]||(a[0]=e=>m.category_id=e),label:e.$t("種類")},null,8,["options","modelValue","label"]),(0,t.Wm)(s,{class:"col-5",outlined:"",dense:"",clearable:"",label:e.$t("物品"),modelValue:m.name,"onUpdate:modelValue":a[1]||(a[1]=e=>m.name=e)},null,8,["label","modelValue"])]),(0,t._)("div",Q,[(0,t.Wm)(c,{class:"col-5",label:e.$t("開始日期"),modelValue:m.start_time,"onUpdate:modelValue":a[2]||(a[2]=e=>m.start_time=e),outlined:"",dense:"",clearable:""},null,8,["label","modelValue"]),(0,t.Wm)(c,{class:"col-5",label:e.$t("結束日期"),modelValue:m.end_time,"onUpdate:modelValue":a[3]||(a[3]=e=>m.end_time=e),outlined:"",dense:"",clearable:""},null,8,["label","modelValue"])]),(0,t._)("div",S,[(0,t.Wm)(d,{color:"primary",onClick:g,label:e.$t("搜索")},null,8,["label"]),(0,t.Wm)(d,{outline:"",color:"dark",onClick:w,label:e.$t("重置")},null,8,["label"])])]),(0,t._)("div",z,[(0,t._)("div",null,[(0,t.Wm)(f,{flat:"",rows:u.rows,columns:u.columns,"row-key":"id",pagination:{rowsPerPage:0}},{header:(0,t.w5)((e=>[(0,t.Wm)(b,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(a=>((0,t.wg)(),(0,t.j4)(_,{align:"center",key:a.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((e=>[(0,t.Wm)(b,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.name),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.category_name),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.num),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.user_name),1)])),_:2},1024),(0,t.Wm)(k,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.create_time),1)])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(r.Z),{modelValue:u.pagination,"onUpdate:modelValue":[a[4]||(a[4]=e=>u.pagination=e),p]},null,8,["modelValue"])])),_:1},8,["rows","columns"])])])],64)}}},$=T,h=$;q()(T,"components",{QSelect:g.Z,QInput:w.Z,QBtn:_.Z,QTable:b.Z,QTr:k.Z,QTh:f.Z,QTd:W.Z});const C={class:"text-h6"},P={__name:"Stock",setup(e){const{t:a}=(0,s.QT)(),l=[{label:a("庫存列表"),value:"StockList"},{label:a("庫存歷史"),value:"StockHistory"}],i=(0,o.iH)("StockList");return(e,a)=>{const o=(0,t.up)("q-card-section"),s=(0,t.up)("q-btn-toggle"),r=(0,t.up)("q-tab-panel"),c=(0,t.up)("q-tab-panels"),u=(0,t.up)("q-card"),m=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(m,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t._)("div",C,(0,n.zw)(e.$t("庫存")),1)])),_:1}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),options:l},null,8,["modelValue"])])),_:1}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{"keep-alive":"",modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"StockList"},{default:(0,t.w5)((()=>[(0,t.Wm)(v)])),_:1}),(0,t.Wm)(r,{name:"StockHistory"},{default:(0,t.w5)((()=>[(0,t.Wm)(h)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})}}};var x=l(9885),j=l(4458),B=l(3190),H=l(1389),D=l(9800),L=l(4106);const N=P,Y=N;q()(P,"components",{QPage:x.Z,QCard:j.Z,QCardSection:B.Z,QBtnToggle:H.Z,QTabPanels:D.Z,QTabPanel:L.Z})}}]);