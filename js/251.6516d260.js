"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[251],{237:(e,t,l)=>{l.r(t),l.d(t,{default:()=>j});var o=l(9835),a=l(6970),n=l(499),u=l(8339),d=l(7712),s=l(1986),c=l(2819),i=l(6882),_=l(831),m=l(6827);const r={class:"text-h5"},p={class:"text-subtitle1"},w={class:"text-subtitle1 q-mb-md"},q={class:"row items-center"},f={class:"q-ml-sm"},h={class:"text-subtitle1 q-mb-md required"},b={class:"row"},g={class:"row"},v={class:"col-6"},k={class:"row q-mt-xs q-gutter-md"},V=["data"],y={__name:"View",setup(e){(0,u.tv)();const t=(0,u.yj)(),{t:l}=(0,d.QT)(),y=(0,o.f3)("post"),W=(0,n.qj)({id:t.params.id,discount:0,discount_total:(0,o.Fl)((()=>W.quote_storehouse.reduce(((e,t)=>e+Number(t.discount)),0))),expected_lease_time:"",quote_storehouse:[],quote_remarks:[],customer:{type:"",client_register_name:"",client_id_code:"",client_address:"",client_phone:"",client_telephone:"",client_email:"",client_bank_name:"",client_account:"",client_account_name:"",contact_ename:"",contact_name:"",contact_id_code:"",contact_address:"",contact_phone:"",contact_telephone:"",contact_email:"",id_code_file:"",address_identify:"",declare_url:"",other_url:"",br_url:"",company_seal_url:"",client_company_ename:"",client_company_name:"",client_contact_ename:"",client_contact_name:"",client_certificate:"",client_due_date:"",client_register_ename:"",client_contact_position:""}}),U=()=>{y("/quote/edit_quote",{id:W.id},(e=>{W.customer=e.info.customer,W.quote_storehouse=e.info.quote_storehouse,W.quote_remarks=e.info.quote_remarks,W.expected_lease_time=e.info.expected_lease_time,W.discount=e.info.discount}))};(0,o.bv)((()=>{U()}));const x=(0,n.qj)({show:!1,dialog:"",url:"",loading:!1}),$=()=>{x.loading=!0;let e=t.params.id;y("/quote/create_pdf",{order_number:e},(e=>{"success"===e.status?(x.url=e.info["pdfurl"],x.show=!0,x.loading=!1):(m.Z.create({message:l("預覽失敗"),position:"top",color:"negative"}),x.loading=!1)}))};return(e,t)=>{const l=(0,o.up)("q-card-section"),u=(0,o.up)("q-input"),d=(0,o.up)("date"),m=(0,o.up)("q-btn"),y=(0,o.up)("q-card"),U=(0,o.up)("q-form"),Z=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(Z,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{ref:"formRef"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,(0,a.zw)(e.$t("預覽報價")),1)])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.Uk)((0,a.zw)(e.$t("客戶的類型"))+": ",1),0===W.customer.type?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,a.zw)(e.$t("個人")),1)],64)):(0,o.kq)("",!0),1===W.customer.type?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,a.zw)(e.$t("公司")),1)],64)):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(l,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.Z),{modelValue:W.customer,"onUpdate:modelValue":t[0]||(t[0]=e=>W.customer=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",w,(0,a.zw)(e.$t("折扣資訊")),1),(0,o._)("div",q,[(0,o.Wm)(u,{readonly:"",class:"col-5",label:e.$t("折扣(%OFF)"),outlined:"",dense:"",clearable:"",modelValue:W.discount,"onUpdate:modelValue":t[1]||(t[1]=e=>W.discount=e)},null,8,["label","modelValue"]),(0,o._)("span",f,"$ "+(0,a.zw)(e.fmtCurrency(W.discount_total)),1)])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",h,(0,a.zw)(e.$t("預計搬入時間")),1),(0,o._)("div",b,[(0,o.Wm)(d,{class:"col-5",readonly:"",rules:[t=>t&&t.length>0||e.$t("請選擇預計搬入時間")],outlined:"",dense:"",clearable:"",modelValue:W.expected_lease_time,"onUpdate:modelValue":t[2]||(t[2]=e=>W.expected_lease_time=e)},null,8,["rules","modelValue"])])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(c.Z),{readonly:"",modelValue:W.quote_storehouse,"onUpdate:modelValue":t[3]||(t[3]=e=>W.quote_storehouse=e),discount:W.discount},null,8,["modelValue","discount"])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o._)("div",v,[(0,o.Wm)((0,n.SU)(i.Z),{readonly:"",modelValue:W.quote_remarks,"onUpdate:modelValue":t[4]||(t[4]=e=>W.quote_remarks=e)},null,8,["modelValue"])])])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o.Wm)(m,{loading:x.loading,onClick:$,size:"md",color:"positive",unelevated:"",label:e.$t("預覽")+" PDF"},null,8,["loading","label"]),(0,o.Wm)(m,{to:"/quotation",size:"md",color:"negative",unelevated:"",label:e.$t("返回")},null,8,["label"])])])),_:1})])),_:1})])),_:1},512),(0,o.Wm)((0,n.SU)(_.Z),{modelValue:x.show,"onUpdate:modelValue":t[5]||(t[5]=e=>x.show=e),title:"PDF "+e.$t("預覽")},{default:(0,o.w5)((()=>[(0,o._)("object",{data:e.resolveAssetsURL(x.url),type:"application/pdf",style:{width:"90vw",height:"80vh","max-width":"1200px"}},null,8,V)])),_:1},8,["modelValue","title"])])),_:1})}}};var W=l(9885),U=l(8326),x=l(4458),$=l(3190),Z=l(6611),z=l(8879),Q=l(9984),C=l.n(Q);const F=y,j=F;C()(y,"components",{QPage:W.Z,QForm:U.Z,QCard:x.Z,QCardSection:$.Z,QInput:Z.Z,QBtn:z.Z})}}]);