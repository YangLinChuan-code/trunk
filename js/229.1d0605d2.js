"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[229],{4229:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});t(5633);var a=t(9835),o=t(6970),s=t(499),u=t(7712),i=t(8339),n=t(6827);const d={class:"text-h6"},c={class:"row"},r={class:"row"},m={class:"row"},p={class:"row"},b={class:"row"},g={class:"row"},v={class:"row items-center text-subtitle1"},_={class:"row q-gutter-x-lg"},U={__name:"EditCoupon",setup(e){const l=(0,s.iH)(!1),{t}=(0,u.QT)(),U=(0,i.yj)(),V=(0,i.tv)(),w=(0,a.f3)("post");let S=(0,s.qj)({id:"",title:"",type:"",price:"",code:"",status:1,start_time:"",end_time:""});const h={title:[e=>e.length>0||t("請輸入優惠標題")],type:[e=>""!==e||t("請選擇優惠類別")],price:[e=>e>0||t("請輸入折扣金額")],code:[e=>e.length>0||t("請輸入優惠碼"),e=>/^\S+$/.test(e)||t("請輸入正確優惠碼")],status:[e=>e.length>0||t("請選擇狀態")]},f=((0,s.iH)(1),[{label:t("啟用"),value:1},{label:t("禁用"),value:0}]),W=[{label:t("固定金額"),value:0},{label:t("百分比"),value:1}];(0,a.bv)((()=>{Z()}));const Z=()=>{let e=U.params.id;w("/discount/discount_edit ",{id:e},(e=>{if("success"===e.status)for(let l in S)Object.hasOwn(e.info,l)&&(S[l]=e.info[l]);else n.Z.create({message:e.message,position:"top",color:"negative"})}))},$=()=>{if(1==S.type&&Number(S.price)>100)return n.Z.create({message:t("優惠類型為百分比，優惠金額最高輸入100"),position:"top",color:"negative"});l.value=!0,w("/discount/discount_save",{form:S},(e=>{"success"===e.status?(l.value=!1,n.Z.create({message:e.message,position:"top",color:"positive"}),V.go(-1)):n.Z.create({message:e.message,position:"top",color:"negative"})}))};return(e,t)=>{const u=(0,a.up)("q-card-section"),i=(0,a.up)("q-input"),n=(0,a.up)("q-select"),U=(0,a.up)("date"),V=(0,a.up)("q-option-group"),w=(0,a.up)("q-btn"),Z=(0,a.up)("q-form"),q=(0,a.up)("q-card"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,(0,o.zw)(e.$t("編輯")+e.$t("優惠券")),1)])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{onSubmit:$,class:"q-gutter-y-lg"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(i,{class:"col-5",label:e.$t("標題"),modelValue:(0,s.SU)(S).title,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.SU)(S).title=e),"hide-bottom-space":"",rules:h.title,outlined:"",dense:"",clearable:""},null,8,["label","modelValue","rules"])]),(0,a._)("div",r,[(0,a.Wm)(n,{class:"col-5",label:e.$t("優惠類別"),outlined:"",dense:"",modelValue:(0,s.SU)(S).type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.SU)(S).type=e),options:W,"emit-value":"","map-options":"",rules:h.type,"hide-bottom-space":""},null,8,["label","modelValue","rules"])]),(0,a._)("div",m,[(0,a.Wm)(i,{class:"col-5",label:e.$t("折扣金額"),outlined:"",dense:"",clearable:"",modelValue:(0,s.SU)(S).price,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.SU)(S).price=e),rules:h.price,"hide-bottom-space":""},null,8,["label","modelValue","rules"])]),(0,a._)("div",p,[(0,a.Wm)(i,{class:"col-5",label:e.$t("優惠碼"),outlined:"",dense:"",clearable:"",modelValue:(0,s.SU)(S).code,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,s.SU)(S).code=e),rules:h.code,"hide-bottom-space":""},null,8,["label","modelValue","rules"])]),(0,a._)("div",b,[(0,a.Wm)(U,{label:e.$t("有效期開始日期"),"stack-label":"",class:"col-5",outlined:"",dense:"",clearable:"",modelValue:(0,s.SU)(S).start_time,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,s.SU)(S).start_time=e)},null,8,["label","modelValue"])]),(0,a._)("div",g,[(0,a.Wm)(U,{label:e.$t("有效期結束日期"),"stack-label":"",class:"col-5",outlined:"",dense:"",clearable:"",modelValue:(0,s.SU)(S).end_time,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,s.SU)(S).end_time=e)},null,8,["label","modelValue"])]),(0,a._)("div",v,[(0,a._)("div",null,(0,o.zw)(e.$t("狀態"))+"：",1),(0,a.Wm)(V,{modelValue:(0,s.SU)(S).status,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,s.SU)(S).status=e),options:f,color:"priamry",inline:"",rules:h.status},null,8,["modelValue","rules"])]),(0,a._)("div",_,[(0,a.Wm)(w,{color:"primary",type:"submit",loading:l.value,label:e.$t("儲存")},null,8,["loading","label"]),(0,a.Wm)(w,{to:"/other",color:"negative",label:e.$t("返回")},null,8,["label"])])])),_:1})])),_:1})])),_:1})])),_:1})}}};var V=t(9885),w=t(4458),S=t(3190),h=t(8326),f=t(6611),W=t(2259),Z=t(2286),$=t(8879),q=t(9984),y=t.n(q);const Q=U,k=Q;y()(U,"components",{QPage:V.Z,QCard:w.Z,QCardSection:S.Z,QForm:h.Z,QInput:f.Z,QSelect:W.Z,QOptionGroup:Z.Z,QBtn:$.Z})}}]);