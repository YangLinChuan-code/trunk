"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[488],{4788:(e,l,a)=>{a.r(l),a.d(l,{default:()=>K});a(9665),a(5633);var t=a(9835),o=a(6970),s=a(499),n=a(7712),m=a(8339),u=a(6827),r=a(8126),i=a(831);const d={class:"text-h6 q-pl-sm"},c={class:"q-gutter-x-sm"},p={key:0},g={key:1},b={key:2},w={key:3},_={key:4},v={key:5},f={class:"q-gutter-x-sm"},W={class:"q-pa-sm q-gutter-y-lg"},V={class:"row"},y={class:"col-6 q-gutter-y-lg"},h={class:"col-6 q-gutter-y-lg"},q={class:"row"},$={class:"col-6 q-gutter-y-lg"},Z={class:"required"},k={class:"required"},U={class:"q-mt-md q-gutter-sm"},z={__name:"BranchList",setup(e){const{t:l}=(0,n.QT)(),a=(0,t.f3)("post"),z=(0,m.tv)(),Q=((0,m.yj)(),[{label:l("分店設定"),value:0},{label:l("編號規則"),value:1},{label:"smtp",value:2}]),S=(0,s.iH)(!1),T=(0,s.iH)(!1),j=(0,s.iH)(!1),C=(0,s.iH)(!1),x=(0,s.iH)(0),D=(0,s.qj)({columns:[{name:"branchId",label:l("分店ID"),align:"center"},{name:"branchName",label:l("分店名稱"),align:"center"},{name:"updateTime",label:l("更新時間"),align:"center"},{name:"operate",label:l("操作"),align:"center"}],rows:[]}),H=(0,s.qj)({columns:[{name:"branch",label:l("分店"),align:"center"},{name:"type",label:l("類型"),align:"center"},{name:"shortNum",label:l("前綴"),align:"center"},{name:"num",label:l("起始數"),align:"center"},{name:"updateTime",label:l("更改時間"),align:"center"},{name:"operate",label:l("操作"),align:"center"}],rows:[]}),L=(0,s.qj)({visible:!1,loading:!1,title:(0,t.Fl)((()=>{const e=r.Z.getItem("storehouse_name_id"),a=r.Z.getItem("storeList")??[],t=a.find((l=>l.id===e))??{name:"",id:""};return`${l("設定")}    ${t.name}`})),form:{short_name:"",num:"",branch_name:"",order_num:"",id:""},rules:{short_name:[e=>e&&e.length>0||l("請輸入前綴")],order_num:[e=>e&&e.length>0||l("請輸入訂單號")],branch_name:[e=>e&&e.length>0||l("請輸入名稱")],num:[e=>String(e)&&""!==String(e).trim()||l("請輸入起始數")]}}),P=[{label:"TLS",value:0},{label:"SSL",value:1}],I=(0,s.qj)({id:"",title:"",content:""}),O=(0,s.iH)("0"),B=(0,s.qj)({id:"",server:"",port:"",username:"",password:"",senders_name:"",service_email:"",service_type:0,test_email:""});(0,t.bv)((()=>{F(),E(),G(),R()}));const F=()=>{a("/set/storehouse_name_list",{},(e=>{"success"===e.status?D.rows=e.info:u.Z.create({message:e.message,position:"top",color:"negative"})}))},M=e=>{z.push(`/set/branchedit/${e}`)},N=e=>{L.loading=!0,a("/set/order_edit",{id:e},(e=>{"success"===e.status?(L.form.short_name=e.info.short_name,L.form.num=e.info.num,L.form.branch_name=e.info.branch_name,L.form.order_num=e.info.order_num,L.form.id=e.info.id,L.loading=!1,L.visible=!0):(L.loading=!1,u.Z.create({message:e.message,position:"top",color:"negative"}))}))},A=()=>{const e=L.form;C.value=!0,a("/set/order_save",e,(e=>{"success"===e.status?(C.value=!1,L.visible=!1,E(),u.Z.create({message:e.message,position:"top",color:"positive"})):u.Z.create({message:e.message,position:"top",color:"negative"})}))},E=()=>{a("/set/order_list",{},(e=>{"success"===e.status?H.rows=e.info:u.Z.create({message:e.message,position:"top",color:"negative"})}))},G=()=>{a("/smtp/smtp_info",{},(e=>{if("success"===e.status)for(let l in B)Object.hasOwn(e.info,l)&&(B[l]=e.info[l]);else u.Z.create({message:e.message,position:"top",color:"negative"})}))},J=()=>{T.value=!0,a("/smtp/smtp_save",B,(e=>{"success"===e.status?(T.value=!1,u.Z.create({message:e.message,position:"top",color:"positive"}),G()):u.Z.create({message:e.message,position:"top",color:"negative"})}))},K=()=>{S.value=!0,a("/smtp/test_email",{test_email:B.test_email},(e=>{"success"===e.status?(S.value=!1,u.Z.create({message:e.message,position:"top",color:"positive"})):u.Z.create({message:e.message,position:"top",color:"negative"})}))},R=()=>{a("/smtp/smtp_template_info",{},(e=>{if("success"===e.status)for(let l in I)Object.hasOwn(e.info,l)&&(I[l]=e.info[l]);else u.Z.create({message:e.message,position:"top",color:"negative"})}))},X=()=>{j.value=!0,a("/smtp/smtp_template_save",I,(e=>{"success"===e.status?(j.value=!1,u.Z.create({message:e.message,position:"top",color:"positive"}),R()):u.Z.create({message:e.message,position:"top",color:"negative"})}))};return(e,l)=>{const a=(0,t.up)("q-card-section"),n=(0,t.up)("q-btn-toggle"),m=(0,t.up)("q-td"),u=(0,t.up)("q-btn"),r=(0,t.up)("q-tr"),z=(0,t.up)("q-table"),F=(0,t.up)("q-tab"),E=(0,t.up)("q-tabs"),G=(0,t.up)("q-separator"),R=(0,t.up)("q-input"),Y=(0,t.up)("q-select"),ee=(0,t.up)("q-form"),le=(0,t.up)("q-tab-panel"),ae=(0,t.up)("q-tab-panels"),te=(0,t.up)("q-card"),oe=(0,t.up)("q-page"),se=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(oe,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,null,{default:(0,t.w5)((()=>[(0,t.Wm)(te,null,{default:(0,t.w5)((()=>[(0,t.Wm)(a,{class:"items-center"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t._)("div",null,(0,o.zw)(e.$t("設置")),1)])])),_:1}),(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{size:"0.9375rem",modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),options:Q,"toggle-color":"primary"},null,8,["modelValue"])])),_:1}),0===x.value?((0,t.wg)(),(0,t.j4)(a,{key:0,class:"q-gutter-y-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t.Wm)(z,{flat:"",rows:D.rows,columns:D.columns,"row-key":"id","hide-bottom":""},{body:(0,t.w5)((l=>[(0,t.Wm)(r,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.short_name),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.name),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.update_time),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.Wm)(u,{color:"primary",onClick:e=>M(l.row.id),label:e.$t("編輯")},null,8,["onClick","label"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1})])),_:1})):1===x.value?((0,t.wg)(),(0,t.j4)(a,{key:1,class:"q-gutter-y-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,null,{default:(0,t.w5)((()=>[(0,t.Wm)(z,{flat:"",rows:H.rows,columns:H.columns,"row-key":"id","hide-bottom":""},{body:(0,t.w5)((l=>[(0,t.Wm)(r,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.branch),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[0===l.row.type?((0,t.wg)(),(0,t.iD)("span",p,(0,o.zw)(e.$t("報價單編號")),1)):1===l.row.type?((0,t.wg)(),(0,t.iD)("span",g,(0,o.zw)(e.$t("訂單編號")),1)):2===l.row.type?((0,t.wg)(),(0,t.iD)("span",b,(0,o.zw)(e.$t("協議編號")),1)):3===l.row.type?((0,t.wg)(),(0,t.iD)("span",w,(0,o.zw)(e.$t("收款單編號")),1)):4===l.row.type?((0,t.wg)(),(0,t.iD)("span",_,(0,o.zw)(e.$t("發票編號")),1)):5===l.row.type?((0,t.wg)(),(0,t.iD)("span",v,(0,o.zw)(e.$t("終止合同編號")),1)):(0,t.kq)("",!0)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.short_name),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.num),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.row.update_time),1)])),_:2},1024),(0,t.Wm)(m,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t.Wm)(u,{loading:L.loading,color:"primary",label:e.$t("編輯"),onClick:e=>N(l.row.id)},null,8,["loading","label","onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1})])),_:1})):2===x.value?((0,t.wg)(),(0,t.j4)(a,{key:2,class:"q-gutter-y-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(te,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{modelValue:O.value,"onUpdate:modelValue":l[1]||(l[1]=e=>O.value=e),class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{name:"0",label:"SMTP "+e.$t("設定")},null,8,["label"]),(0,t.Wm)(F,{name:"1",label:"SMTP "+e.$t("模板設定")},null,8,["label"])])),_:1},8,["modelValue"]),(0,t.Wm)(G),(0,t.Wm)(ae,{modelValue:O.value,"onUpdate:modelValue":l[12]||(l[12]=e=>O.value=e),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(le,{name:"0"},{default:(0,t.w5)((()=>[(0,t._)("div",W,[(0,t.Wm)(ee,{onSubmit:J},{default:(0,t.w5)((()=>[(0,t._)("div",V,[(0,t._)("div",y,[(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.server,"onUpdate:modelValue":l[2]||(l[2]=e=>B.server=e),label:e.$t("伺服器")},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.port,"onUpdate:modelValue":l[3]||(l[3]=e=>B.port=e),label:e.$t("端口")},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.username,"onUpdate:modelValue":l[4]||(l[4]=e=>B.username=e),label:e.$t("用戶名稱")},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.password,"onUpdate:modelValue":l[5]||(l[5]=e=>B.password=e),label:e.$t("密碼"),type:"password"},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.senders_name,"onUpdate:modelValue":l[6]||(l[6]=e=>B.senders_name=e),label:e.$t("發件人名稱")},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.service_email,"onUpdate:modelValue":l[7]||(l[7]=e=>B.service_email=e),label:e.$t("服務郵箱")},null,8,["modelValue","label"]),(0,t.Wm)(Y,{dense:"",outlined:"",modelValue:B.service_type,"onUpdate:modelValue":l[8]||(l[8]=e=>B.service_type=e),options:P,"emit-value":"","map-options":"",label:"TLS/SSL"},null,8,["modelValue"]),(0,t.Wm)(u,{color:"primary",type:"submit",loading:T.value,label:e.$t("儲存")},null,8,["loading","label"])])])])),_:1}),(0,t.Wm)(ee,{onSubmit:K,class:"row"},{default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:B.test_email,"onUpdate:modelValue":l[9]||(l[9]=e=>B.test_email=e),label:e.$t("接收郵箱")},null,8,["modelValue","label"]),(0,t.Wm)(u,{color:"primary",type:"submit",loading:S.value,label:e.$t("測試發送")},null,8,["loading","label"])])])),_:1})])])),_:1}),(0,t.Wm)(le,{name:"1"},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{class:"q-pa-sm",onSubmit:X},{default:(0,t.w5)((()=>[(0,t._)("div",q,[(0,t._)("div",$,[(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",modelValue:I.title,"onUpdate:modelValue":l[10]||(l[10]=e=>I.title=e),label:e.$t("主題")},null,8,["modelValue","label"]),(0,t.Wm)(R,{dense:"",outlined:"",clearable:"",type:"textarea",modelValue:I.content,"onUpdate:modelValue":l[11]||(l[11]=e=>I.content=e),label:e.$t("內容")},null,8,["modelValue","label"]),(0,t.Wm)(u,{color:"primary",label:e.$t("儲存"),loading:j.value,type:"submit"},null,8,["label","loading"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)((0,s.SU)(i.Z),{modelValue:L.visible,"onUpdate:modelValue":l[17]||(l[17]=e=>L.visible=e),title:L.title},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{style:{width:"90vw","max-width":"350px"},onSubmit:A},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{dense:"",outlined:"",modelValue:L.form.branch_name,"onUpdate:modelValue":l[13]||(l[13]=e=>L.form.branch_name=e),rules:L.rules.branch_name,disable:""},null,8,["modelValue","rules"]),(0,t.Wm)(R,{dense:"",outlined:"",modelValue:L.form.order_num,"onUpdate:modelValue":l[14]||(l[14]=e=>L.form.order_num=e),rules:L.rules.order_num,disable:""},null,8,["modelValue","rules"]),(0,t.Wm)(R,{dense:"",outlined:"","label-slot":"",modelValue:L.form.short_name,"onUpdate:modelValue":l[15]||(l[15]=e=>L.form.short_name=e),rules:L.rules.short_name},{label:(0,t.w5)((()=>[(0,t._)("span",Z,(0,o.zw)(e.$t("前綴")),1)])),_:1},8,["modelValue","rules"]),(0,t.Wm)(R,{dense:"",outlined:"","label-slot":"",modelValue:L.form.num,"onUpdate:modelValue":l[16]||(l[16]=e=>L.form.num=e),rules:L.rules.num},{label:(0,t.w5)((()=>[(0,t._)("span",k,(0,o.zw)(e.$t("起始數")),1)])),_:1},8,["modelValue","rules"]),(0,t._)("div",null,(0,o.zw)(e.$t("注意"))+": "+(0,o.zw)(e.$t("單號格式"))+": "+(0,o.zw)(e.$t("前綴"))+" + "+(0,o.zw)(e.$t("年份"))+" + "+(0,o.zw)(e.$t("月份"))+" + "+(0,o.zw)(e.$t("顺序數字")),1),(0,t._)("div",U,[(0,t.Wm)(u,{type:"submit",color:"primary",loading:C.value,label:e.$t("保存")},null,8,["loading","label"]),(0,t.wy)((0,t.Wm)(u,{label:e.$t("取消")},null,8,["label"]),[[se]])])])),_:1})])),_:1},8,["modelValue","title"])])),_:1})}}};var Q=a(9885),S=a(8326),T=a(4458),j=a(3190),C=a(1389),x=a(9497),D=a(3532),H=a(7220),L=a(8879),P=a(7817),I=a(900),O=a(926),B=a(9800),F=a(4106),M=a(6611),N=a(2259),A=a(2146),E=a(9984),G=a.n(E);const J=z,K=J;G()(z,"components",{QPage:Q.Z,QForm:S.Z,QCard:T.Z,QCardSection:j.Z,QBtnToggle:C.Z,QTable:x.Z,QTr:D.Z,QTd:H.Z,QBtn:L.Z,QTabs:P.Z,QTab:I.Z,QSeparator:O.Z,QTabPanels:B.Z,QTabPanel:F.Z,QInput:M.Z,QSelect:N.Z}),G()(z,"directives",{ClosePopup:A.Z})}}]);