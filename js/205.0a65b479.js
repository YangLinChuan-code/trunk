"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[205],{2754:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});a(5633);var o=a(9835),t=a(6970),n=a(499),s=a(7712),i=a(9185),r=a(6827),u=a(8339);const d={class:"row q-col-gutter-x-lg"},m={class:"row col-4"},c={class:"row col-4"},p={class:"row col-4"},g={class:"row q-col-gutter-x-lg"},w={class:"row q-gutter-x-lg"},b={class:"q-gutter-x-md"},_={class:"text-h6"},W={class:"row items-center text-subtitle1"},f={class:"row q-gutter-x-lg"},v={__name:"User",setup(e){const{t:l}=(0,s.QT)(),a=(0,o.f3)("post");let v=(0,n.iH)(!1);(0,u.tv)();const q=[{label:l("有效"),value:1},{label:l("無效"),value:0}],V=(0,n.iH)(!1),y=(0,n.qj)({columns:[{name:"user_id",label:l("員工")+"ID",align:"center",sortable:!0},{name:"name",label:l("員工名字"),align:"center"},{name:"email",label:l("員工郵箱"),align:"center",sortable:!0},{name:"status",label:l("狀態"),align:"center",sortable:!0},{name:"end_time",label:l("最後登錄時間"),align:"center",sortable:!0},{name:"operate",label:l("操作"),align:"center"}],rows:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}}),k=(0,n.qj)({id:"",user_id:"",name:"",email:"",status:1}),U=(0,n.qj)({user_id:"",user_name:"",user_email:""});(0,o.bv)((()=>{Z({pagination:y.pagination})}));const Z=({pagination:e})=>{let{page:l,rowsPerPage:o,sortBy:t,descending:n}=e;const s={page:l,page_size:o,sort_name:t,sort_order:n?0:1,search_form:U};a("/user/user_list",s,(e=>{"success"===e.status?(y.rows=e.info,y.pagination.rowsNumber=e?.pager?.p_rows??0,y.pagination.page=l,y.pagination.rowsPerPage=o,y.pagination.sortBy=t,y.pagination.descending=n):r.Z.create({message:e.message,position:"top",color:"negative"})}))},$=e=>{v.value=!0,a("/user/user_edit",{id:e},(e=>{if("success"===e.status)for(let l in k)Object.hasOwn(e.info,l)&&(k[l]=e.info[l]);else r.Z.create({message:e.message,position:"top",color:"negative"})}))},h=()=>{V.value=!0,a("/user/user_save",k,(e=>{"success"===e.status?(V.value=!1,r.Z.create({message:e.message,position:"top",color:"positive"}),Z({pagination:y.pagination})):r.Z.create({message:e.message,position:"top",color:"negative"})}))},Q=()=>{U.user_id=U.user_name=U.user_email="",y.pagination.page=1,y.pagination.rowsNumber=0,y.pagination.sortBy="id",y.pagination.descending=!1,Z({pagination:y.pagination})};return(e,l)=>{const a=(0,o.up)("q-btn"),s=(0,o.up)("q-card-section"),r=(0,o.up)("q-input"),u=(0,o.up)("q-th"),z=(0,o.up)("q-tr"),x=(0,o.up)("q-td"),C=(0,o.up)("q-chip"),j=(0,o.up)("q-table"),P=(0,o.up)("q-form"),T=(0,o.up)("q-card"),B=(0,o.up)("q-space"),D=(0,o.up)("q-option-group"),S=(0,o.up)("q-dialog"),I=(0,o.up)("q-page"),H=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(I,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("div",m,[(0,o.Wm)(a,{class:"col",size:"1.4rem",padding:"2rem 0",to:"user/registration",color:"primary",label:e.$t("用戶註冊")},null,8,["label"])]),(0,o._)("div",c,[(0,o.Wm)(a,{class:"col",size:"1.4rem",padding:"2rem 0",to:"user/authority",color:"primary",label:e.$t("權限管理")},null,8,["label"])]),(0,o._)("div",p,[(0,o.Wm)(a,{class:"col",size:"1.4rem",padding:"2rem 0",to:"user/logRecord",color:"primary",label:e.$t("用戶日誌記錄")},null,8,["label"])])])])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"q-gutter-y-lg"},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(r,{class:"col-4",label:e.$t("員工ID"),modelValue:U.user_id,"onUpdate:modelValue":l[0]||(l[0]=e=>U.user_id=e),outlined:"",dense:"",clearable:""},null,8,["label","modelValue"]),(0,o.Wm)(r,{class:"col-4",label:e.$t("員工名字"),modelValue:U.user_name,"onUpdate:modelValue":l[1]||(l[1]=e=>U.user_name=e),outlined:"",dense:"",clearable:""},null,8,["label","modelValue"]),(0,o.Wm)(r,{class:"col-4",label:e.$t("員工郵箱"),modelValue:U.user_email,"onUpdate:modelValue":l[2]||(l[2]=e=>U.user_email=e),outlined:"",dense:"",clearable:""},null,8,["label","modelValue"])]),(0,o._)("div",w,[(0,o.Wm)(a,{color:"primary",onClick:Z,label:e.$t("搜索")},null,8,["label"]),(0,o.Wm)(a,{outline:"",color:"dark",onClick:Q,label:e.$t("重置")},null,8,["label"])]),(0,o.Wm)(j,{flat:"",rows:y.rows,columns:y.columns,"row-key":"id",pagination:y.pagination,"onUpdate:pagination":l[3]||(l[3]=e=>y.pagination=e),selection:"multiple",selected:y.selected,"onUpdate:selected":l[4]||(l[4]=e=>y.selected=e),"binary-state-sort":"",onRequest:Z},{header:(0,o.w5)((e=>[(0,o.Wm)(z,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(l=>((0,o.wg)(),(0,o.j4)(u,{key:l.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((l=>[(0,o.Wm)(z,{props:l},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.row.user_id),1)])),_:2},1024),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.row.name),1)])),_:2},1024),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.row.email),1)])),_:2},1024),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[1===l.row.status?((0,o.wg)(),(0,o.j4)(C,{key:0,color:"positive","text-color":"white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("有效")),1)])),_:1})):0===l.row.status?((0,o.wg)(),(0,o.j4)(C,{key:1,color:"negative","text-color":"white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.$t("無效")),1)])),_:1})):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(l.row.end_time),1)])),_:2},1024),(0,o.Wm)(x,{align:"center"},{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o.Wm)(a,{onClick:e=>$(l.row.id),color:"primary",label:e.$t("編輯")},null,8,["onClick","label"]),(0,o.Wm)(a,{color:"negative",label:e.$t("刪除")},null,8,["label"])])])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,o.w5)((e=>[(0,o.Wm)((0,n.SU)(i.Z),{modelValue:e.pagination,"onUpdate:modelValue":[l=>e.pagination=l,Z]},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","columns","pagination","selected"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(S,{modelValue:(0,n.SU)(v),"onUpdate:modelValue":l[9]||(l[9]=e=>(0,n.dq)(v)?v.value=e:v=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{style:{"min-width":"600px","max-width":"1200px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"row items-center q-pb-none"},{default:(0,o.w5)((()=>[(0,o._)("div",_,(0,t.zw)(e.$t("編輯")+e.$t("員工")),1),(0,o.Wm)(B),(0,o.wy)((0,o.Wm)(a,{icon:"close",flat:"",round:"",dense:""},null,512),[[H]])])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("form",{action:"",class:"q-gutter-y-lg",onSubmit:h},[(0,o.Wm)(r,{class:"col-5",modelValue:k.user_id,"onUpdate:modelValue":l[5]||(l[5]=e=>k.user_id=e),label:e.$t("員工ID"),outlined:"",dense:"",clearable:""},null,8,["modelValue","label"]),(0,o.Wm)(r,{class:"col-5",modelValue:k.name,"onUpdate:modelValue":l[6]||(l[6]=e=>k.name=e),label:e.$t("員工名字"),outlined:"",dense:"",clearable:""},null,8,["modelValue","label"]),(0,o.Wm)(r,{class:"col-5",modelValue:k.email,"onUpdate:modelValue":l[7]||(l[7]=e=>k.email=e),label:e.$t("員工郵箱"),outlined:"",dense:"",clearable:""},null,8,["modelValue","label"]),(0,o._)("div",W,[(0,o._)("div",null,(0,t.zw)(e.$t("狀態"))+"：",1),(0,o.Wm)(D,{modelValue:k.status,"onUpdate:modelValue":l[8]||(l[8]=e=>k.status=e),options:q,color:"priamry",inline:""},null,8,["modelValue"])]),(0,o._)("div",f,[(0,o.Wm)(B),(0,o.wy)((0,o.Wm)(a,{color:"primary",type:"submit",loading:V.value,label:e.$t("儲存")},null,8,["loading","label"]),[[H]]),(0,o.wy)((0,o.Wm)(a,{color:"negative",label:e.$t("返回")},null,8,["label"]),[[H]])])],32)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var q=a(9885),V=a(4458),y=a(3190),k=a(8879),U=a(8326),Z=a(6611),$=a(9497),h=a(3532),Q=a(1682),z=a(7220),x=a(7691),C=a(2074),j=a(136),P=a(2286),T=a(2146),B=a(9984),D=a.n(B);const S=v,I=S;D()(v,"components",{QPage:q.Z,QCard:V.Z,QCardSection:y.Z,QBtn:k.Z,QForm:U.Z,QInput:Z.Z,QTable:$.Z,QTr:h.Z,QTh:Q.Z,QTd:z.Z,QChip:x.Z,QDialog:C.Z,QSpace:j.Z,QOptionGroup:P.Z}),D()(v,"directives",{ClosePopup:T.Z})}}]);