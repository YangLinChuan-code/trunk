"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[661],{6616:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ie});a(5633);var o=a(9835),t=a(6970),d=a(499),n=a(8339),s=a(2835),i=a(1395),m=a(6827),u=a(7712),c=a(831);const r={class:"text-h6 q-pl-sm"},_=(0,o._)("div",null,"檢示訂單",-1),p={class:"q-pt-md"},b={class:"col-6"},v={class:"col-6"},V={class:"col-12 q-mb-md"},U={class:"text-subtitle1"},g={class:"col-6"},h={class:"col-6"},f={class:"col-6"},y={class:"col-6"},S={class:"col-6"},W={class:"col-6"},w={class:"col-6"},$={class:"col-12"},q={class:"text-subtitle1"},G={class:"col-12 q-my-md"},Z={class:"col-12 q-mb-md"},k={class:"text-subtitle1"},j={class:"col-6"},x={class:"col-6"},Q={class:"col-6"},C={class:"col-6"},D={class:"col-12 q-my-md"},z={class:"text-subtitle1"},F={class:"col-6"},I={class:"col-6"},P={class:"col-6"},R={class:"col-6"},T={class:"col-12 q-my-md"},E={class:"text-subtitle1"},H={class:"col-12"},L=(0,o._)("div",{class:"col-12 q-my-md"},[(0,o._)("div",{class:"text-subtitle1 required"},"Payment for the License Period herein stated is to be made in accordance with the following schedule:")],-1),O={class:"col-6"},A={class:"col-6"},B={class:"col-6"},K={class:"col-12 row q-gutter-sm"},Y=["data"],J={__name:"Debit",setup(e){const l=(0,n.yj)(),a=(0,n.tv)(),{t:J}=(0,u.QT)(),M=(0,o.f3)("post"),N=(0,d.iH)(),X=(0,d.qj)({id:l.params.id,order_num:"",create_time:"",client_telephone:"",client_name:"",code:"",client_email:"",unit_no:"",agreement_orernum:"",client_id:"",user_name:"",storehouse_name:"",collection_storehouse:[],license_start:"",license_end:"",deposit_paid:"",payment_amount:"",amount_due:"",amount_payable:"",payment_id:1,payment_remark:"",payment_period:"",regular_payment:"",periodic_payment:"",last_payment_period:"",free_start_time:"",free_end_time:""});let ee=(0,d.qj)([]);(0,d.qj)({});(0,o.bv)((()=>{oe(),te()}));const le=(0,o.Fl)((()=>X.collection_storehouse.map((e=>e["name"])).join(","))),ae=((0,d.qj)({}),(0,o.Fl)((()=>({dense:!0,outlined:!0,class:"q-field--with-bottom"})))),oe=()=>{const e=l.params.id;M("/orders/collection_edit",{id:e},(e=>{for(const l in e.info)Object.hasOwn(X,l)&&(X[l]=e.info[l])}))},te=()=>{M("/orders/payment_list",{},(e=>{if("success"===e.status){if(e.info.length<1)return;ee=e.info}else m.Z.create({message:e.message,position:"top",color:"negative"})}))},de=()=>{N.value.validate().then((e=>{if(!e)return document.activeElement?.scrollIntoView({behavior:"smooth"});M("/orders/collection_save",X,(e=>{"success"===e.status?(m.Z.create({message:J("保存成功"),position:"top",color:"positive"}),a.go(-1)):m.Z.create({message:e.message,position:"top",color:"negative"})}))}))},ne=(0,d.qj)({loading:!1,url:"",visible:!1});function se(){ne.loading=!0,N.value.validate().then((e=>{if(!e)return document.activeElement?.scrollIntoView({behavior:"smooth"});M("/orders/preview_collection_pdf",X,(e=>{"success"===e.status?(ne.url=e.info["pdfurl"],ne.loading=!1,ne.visible=!0):(m.Z.create({message:J("預覽失敗"),position:"top",color:"negative"}),ne.loading=!1)}))}))}const ie=()=>{a.go(-1)};return(e,l)=>{const a=(0,o.up)("q-card-section"),n=(0,o.up)("q-input"),m=(0,o.up)("q-radio"),u=(0,o.up)("q-btn"),J=(0,o.up)("q-form"),M=(0,o.up)("q-card"),oe=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(oe,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[_,(0,o._)("div",p,"訂單編號 "+(0,t.zw)(X.order_num),1)])])),_:1}),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(J,{ref_key:"formRef",ref:N,class:"row q-col-gutter-x-lg"},{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.order_num,"onUpdate:modelValue":l[0]||(l[0]=e=>X.order_num=e),label:e.$t("收款單編號")}),null,16,["modelValue","label"])]),(0,o._)("div",v,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.create_time,"onUpdate:modelValue":l[1]||(l[1]=e=>X.create_time=e),label:e.$t("日期")}),null,16,["modelValue","label"])]),(0,o._)("div",V,[(0,o._)("div",U,"1."+(0,t.zw)(e.$t("基本資料")),1)]),(0,o._)("div",g,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.client_telephone,"onUpdate:modelValue":l[2]||(l[2]=e=>X.client_telephone=e),label:e.$t("辦公室/住址電話")}),null,16,["modelValue","label"])]),(0,o._)("div",h,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.client_email,"onUpdate:modelValue":l[3]||(l[3]=e=>X.client_email=e),label:e.$t("電郵")}),null,16,["modelValue","label"])]),(0,o._)("div",f,[(0,o.Wm)(n,(0,o.dG)({disable:""},(0,d.SU)(ae),{"model-value":(0,d.SU)(le),label:e.$t("倉庫單元號碼")}),null,16,["model-value","label"])]),(0,o._)("div",y,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.agreement_orernum,"onUpdate:modelValue":l[4]||(l[4]=e=>X.agreement_orernum=e),label:e.$t("協議")}),null,16,["modelValue","label"])]),(0,o._)("div",S,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.code,"onUpdate:modelValue":l[5]||(l[5]=e=>X.code=e),label:e.$t("客戶")+" ID"}),null,16,["modelValue","label"])]),(0,o._)("div",W,[(0,o.Wm)(n,(0,o.dG)({disable:""},(0,d.SU)(ae),{modelValue:X.user_name,"onUpdate:modelValue":l[6]||(l[6]=e=>X.user_name=e),label:e.$t("員工名稱")}),null,16,["modelValue","label"])]),(0,o._)("div",w,[(0,o.Wm)(n,(0,o.dG)({disable:""},(0,d.SU)(ae),{modelValue:X.storehouse_name,"onUpdate:modelValue":l[7]||(l[7]=e=>X.storehouse_name=e),label:e.$t("分店")+" ID"}),null,16,["modelValue","label"])]),(0,o._)("div",$,[(0,o._)("div",q,"2."+(0,t.zw)(e.$t("倉庫")),1)]),(0,o._)("div",G,[(0,o.Wm)((0,d.SU)(s.Z),{modelValue:X.collection_storehouse,"onUpdate:modelValue":l[8]||(l[8]=e=>X.collection_storehouse=e)},null,8,["modelValue"])]),(0,o._)("div",Z,[(0,o._)("div",k,"3."+(0,t.zw)(e.$t("許可證期")),1)]),(0,o._)("div",j,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{modelValue:X.license_start,"onUpdate:modelValue":l[9]||(l[9]=e=>X.license_start=e),label:e.$t("免費時段")}),null,16,["modelValue","label"])]),(0,o._)("div",x,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{modelValue:X.license_end,"onUpdate:modelValue":l[10]||(l[10]=e=>X.license_end=e),label:e.$t("至")}),null,16,["modelValue","label"])]),(0,o._)("div",Q,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{required:"",modelValue:X.license_start,"onUpdate:modelValue":l[11]||(l[11]=e=>X.license_start=e),label:e.$t("合約時段")}),null,16,["modelValue","label"])]),(0,o._)("div",C,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{required:"",modelValue:X.license_end,"onUpdate:modelValue":l[12]||(l[12]=e=>X.license_end=e),label:e.$t("至")}),null,16,["modelValue","label"])]),(0,o._)("div",D,[(0,o._)("div",z,"4."+(0,t.zw)(e.$t("支付信息")),1)]),(0,o._)("div",F,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.deposit_paid,"onUpdate:modelValue":l[13]||(l[13]=e=>X.deposit_paid=e),label:e.$t("已付定金")}),null,16,["modelValue","label"])]),(0,o._)("div",I,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.payment_amount,"onUpdate:modelValue":l[14]||(l[14]=e=>X.payment_amount=e),label:e.$t("至今支付金額")}),null,16,["modelValue","label"])]),(0,o._)("div",P,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.amount_due,"onUpdate:modelValue":l[15]||(l[15]=e=>X.amount_due=e),label:e.$t("到期金額")}),null,16,["modelValue","label"])]),(0,o._)("div",R,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.amount_payable,"onUpdate:modelValue":l[16]||(l[16]=e=>X.amount_payable=e),label:e.$t("應付金額")}),null,16,["modelValue","label"])]),(0,o._)("div",T,[(0,o._)("div",E,"4."+(0,t.zw)(e.$t("支付方式")),1)]),(0,o._)("div",H,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,d.SU)(ee),(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(m,{modelValue:X.payment_id,"onUpdate:modelValue":l[17]||(l[17]=e=>X.payment_id=e),val:e.id,label:e.name},null,8,["modelValue","val","label"])])))),128))]),L,(0,o._)("div",O,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{modelValue:X.payment_period,"onUpdate:modelValue":l[18]||(l[18]=e=>X.payment_period=e),label:e.$t("付款期")}),null,16,["modelValue","label"])]),(0,o._)("div",A,[(0,o.Wm)(n,(0,o.dG)((0,d.SU)(ae),{modelValue:X.regular_payment,"onUpdate:modelValue":l[19]||(l[19]=e=>X.regular_payment=e),label:e.$t("定期付款")}),null,16,["modelValue","label"])]),(0,o._)("div",B,[(0,o.Wm)((0,d.SU)(i.Z),(0,o.dG)((0,d.SU)(ae),{modelValue:X.last_payment_period,"onUpdate:modelValue":l[20]||(l[20]=e=>X.last_payment_period=e),label:e.$t("需在這日期前付款")}),null,16,["modelValue","label"])]),(0,o._)("div",K,[(0,o.Wm)(u,{color:"primary",label:e.$t("保存"),onClick:de},null,8,["label"]),(0,o.Wm)(u,{loading:ne.loading,color:"info",onClick:se,label:e.$t("預覽")+" PDF"},null,8,["loading","label"]),(0,o.Wm)(u,{label:e.$t("返回"),onClick:ie},null,8,["label"])])])),_:1},512)])),_:1})])),_:1}),(0,o.Wm)((0,d.SU)(c.Z),{title:e.$t("預覽")+" PDF",modelValue:ne.visible,"onUpdate:modelValue":l[21]||(l[21]=e=>ne.visible=e)},{default:(0,o.w5)((()=>[(0,o._)("object",{data:e.resolveAssetsURL(ne.url),type:"application/pdf",style:{width:"90vw",height:"80vh","max-width":"1200px"}},null,8,Y)])),_:1},8,["title","modelValue"])])),_:1})}}};var M=a(9885),N=a(4458),X=a(3190),ee=a(8326),le=a(6611),ae=a(1480),oe=a(8879),te=a(8149),de=a(9984),ne=a.n(de);const se=J,ie=se;ne()(J,"components",{QPage:M.Z,QCard:N.Z,QCardSection:X.Z,QForm:ee.Z,QInput:le.Z,QRadio:ae.Z,QBtn:oe.Z,QField:te.Z})}}]);