"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[347],{914:(e,a,l)=>{l.r(a),l.d(a,{default:()=>D});l(9665),l(5633);var t=l(9835),o=l(6970),n=l(499),s=l(7712),r=l(6827),d=l(8339),u=l(9185);const c={class:"text-h6"},i={class:"row"},m={class:"row"},p={class:"row"},w={class:"row"},g={class:"row"},b={class:"row"},_={class:"row"},f={class:"row q-gutter-x-lg"},h=["onClick"],U=["onClick"],k={__name:"StorageUnitView",setup(e){const{t:a}=(0,s.QT)(),l=(0,d.yj)(),k=(0,d.tv)(),W=(0,t.f3)("post"),V=(0,n.qj)({columns:[{name:"customer",label:a("客戶"),align:"center"},{name:"date",label:a("日期"),align:"center"},{name:"orderNo",label:a("訂單編號"),align:"center"},{name:"monthlyFee",label:a("月費"),align:"center"},{name:"noOfMonth",label:a("月份"),align:"center"},{name:"totalFee",label:a("最高費用"),align:"center"},{name:"discount",label:a("折扣"),align:"center"},{name:"actualPayment",label:a("實際支付"),align:"center"},{name:"startDate",label:a("開始日期"),align:"center"},{name:"endDay",label:a("結束日期"),align:"center"}],rows:[],pagination:{page:1,pageSize:10,total:0}});let v=(0,n.qj)({data:{id:"",name:"",extent:"",price:0,status:0,actual_depth:"",actual_width:""},options:{status:[{label:a("可用"),value:"0"},{label:a("佔用"),value:"1"},{label:a("保留"),value:"2"},{label:a("鎖定"),value:"3"}]}});(0,t.bv)((()=>{S(),$()}));const q=e=>{if(!e)return r.Z.create({message:a("信息異常，請聯係管理員"),position:"top",color:"negative"});const l=e.id,t=e.is_order;switch(t){case 0:k.push(`/quotation/edit/${l}`);break;case 1:k.push(`/order/check/${l}`);break;case 2:k.push(`/order/agreement_edit/${l}`);break;default:k.push(`/order/debit/${l}/${l}`)}},y=()=>{k.go(-1)},S=()=>{let e=l.params.id;W("/storehouse/storehouse_preview",{id:e},(e=>{if("success"===e.status){for(let a in v.data)Object.hasOwn(e.info,a)&&(v.data[a]=e.info[a]);switch(e.info.status){case 0:v.data.status=a("可用");break;case 1:v.data.status=a("佔用");break;case 2:v.data.status=a("保留");break;default:v.data.status=a("鎖定")}}else r.Z.create({message:e.message,position:"top",color:"negative"})}))},$=()=>{const{page:e,pageSize:a}=V.pagination,t={page:e,page_size:a,id:l.params.id};W("/storehouse/order_list",t,(e=>{"success"===e.status?(V.rows=e.info,V.pagination.total=e?.pager?.p_rows??0):r.Z.create({message:e.message,position:"top",color:"negative"})}))};return(e,a)=>{const l=(0,t.up)("q-card-section"),s=(0,t.up)("q-input"),r=(0,t.up)("q-select"),d=(0,t.up)("q-btn"),k=(0,t.up)("q-form"),W=(0,t.up)("q-th"),S=(0,t.up)("q-tr"),z=(0,t.up)("q-td"),Z=(0,t.up)("q-table"),C=(0,t.up)("q-card"),Q=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(Q,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,(0,o.zw)(e.$t("倉庫歷史")),1)])),_:1}),(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"q-gutter-y-md"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(s,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.id,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.SU)(v).data.id=e),label:e.$t("倉庫ID")},null,8,["modelValue","label"])]),(0,t._)("div",m,[(0,t.Wm)(s,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.SU)(v).data.name=e),label:e.$t("倉庫名稱")},null,8,["modelValue","label"])]),(0,t._)("div",p,[(0,t.Wm)(s,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.actual_depth,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.SU)(v).data.actual_depth=e),label:e.$t("實際深度")},null,8,["modelValue","label"])]),(0,t._)("div",w,[(0,t.Wm)(s,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.actual_width,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.SU)(v).data.actual_width=e),label:e.$t("實際寬度")},null,8,["modelValue","label"])]),(0,t._)("div",g,[(0,t.Wm)(s,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.extent,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.SU)(v).data.extent=e),label:e.$t("面積(sf)")},null,8,["modelValue","label"])]),(0,t._)("div",b,[(0,t.Wm)(s,{class:"col-5",modelValue:(0,n.SU)(v).data.price,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,n.SU)(v).data.price=e),readonly:"",filled:"",dense:"",clearable:"",label:e.$t("月費")},null,8,["modelValue","label"])]),(0,t._)("div",_,[(0,t.Wm)(r,{class:"col-5",readonly:"",filled:"",dense:"",clearable:"",modelValue:(0,n.SU)(v).data.status,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,n.SU)(v).data.status=e),options:(0,n.SU)(v).options.status,label:e.$t("狀態")},null,8,["modelValue","options","label"])]),(0,t._)("div",f,[(0,t.Wm)(d,{onClick:y,color:"negative",label:e.$t("返回")},null,8,["label"])])])),_:1})])),_:1}),(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{flat:"",rows:V.rows,columns:V.columns,"row-key":"id",pagination:{rowsPerPage:0}},{header:(0,t.w5)((e=>[(0,t.Wm)(S,{props:e},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(a=>((0,t.wg)(),(0,t.j4)(W,{key:a.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[(0,t.Wm)(S,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"link",onClick:e=>q(a.row)},(0,o.zw)(a.row.customer_name),9,h)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.create_time),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"link",onClick:e=>q(a.row)},(0,o.zw)(a.row.order_num),9,U)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(e.fmtCurrency(a.row.storehouse_quote.price)),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.storehouse_quote.prepayment),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(e.fmtCurrency(a.row.storehouse_quote.price*a.row.storehouse_quote.prepayment)),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(e.fmtCurrency(a.row.discount)),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)("$"+(0,o.zw)(e.fmtCurrency(a.row.storehouse_quote.price*a.row.storehouse_quote.prepayment)),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.license_start),1)])),_:2},1024),(0,t.Wm)(z,{align:"center"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.row.license_end),1)])),_:2},1024)])),_:2},1032,["props"])])),bottom:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(u.Z),{modelValue:V.pagination,"onUpdate:modelValue":[a[7]||(a[7]=e=>V.pagination=e),$]},null,8,["modelValue"])])),_:1},8,["rows","columns"])])),_:1})])),_:1})])),_:1})}}};var W=l(9885),V=l(4458),v=l(3190),q=l(8326),y=l(6611),S=l(2259),$=l(8879),z=l(9497),Z=l(3532),C=l(1682),Q=l(7220),T=l(9984),j=l.n(T);const x=k,D=x;j()(k,"components",{QPage:W.Z,QCard:V.Z,QCardSection:v.Z,QForm:q.Z,QInput:y.Z,QSelect:S.Z,QBtn:$.Z,QTable:z.Z,QTr:Z.Z,QTh:C.Z,QTd:Q.Z})}}]);