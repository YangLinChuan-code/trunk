"use strict";(globalThis["webpackChunktrunk"]=globalThis["webpackChunktrunk"]||[]).push([[14],{6607:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var o=l(9835),a=l(6970),n=l(499),s=l(8339),u=l(7712),c=l(6827),d=l(1986),i=l(2819),_=l(6882);const m={class:"text-h5"},r={class:"text-subtitle1"},p={class:"text-subtitle1 q-mb-md"},q={class:"q-my-md"},v={class:"row items-center"},w={class:"q-ml-sm"},f={class:"text-subtitle1 q-mb-md required"},g={class:"row"},b={class:"row"},h={class:"col-6"},y={class:"row q-mt-xs q-gutter-md"},k={__name:"Edit",setup(e){const t=(0,s.tv)(),l=(0,s.yj)(),{t:k}=(0,u.QT)(),V=(0,o.f3)("post"),W=(0,n.iH)(!1),$=(0,n.qj)({id:l.params.id,discount:0,discount_type:1,discount_total:(0,o.Fl)((()=>$.quote_storehouse.reduce(((e,t)=>e+Number(t.discount)),0))),expected_lease_time:"",quote_storehouse:[],quote_remarks:[],customer:{id:"",type:"",code:"",client_register_name:"",client_id_code:"",client_address:"",client_phone:"",client_telephone:"",client_email:"",whatsapp:"",client_bank_name:"",client_account:"",client_account_name:"",contact_ename:"",contact_name:"",contact_id_code:"",contact_address:"",contact_phone:"",contact_telephone:"",contact_email:"",id_code_file:"",address_identify:"",declare_url:"",other_url:"",br_url:"",company_seal_url:"",client_company_ename:"",client_company_name:"",client_contact_ename:"",client_contact_name:"",client_certificate:"",client_due_date:"",client_register_ename:"",client_contact_position:""}}),Z=()=>{V("/quote/edit_quote",{id:$.id},(e=>{$.customer=e.info.customer,$.quote_storehouse=e.info.quote_storehouse,$.quote_remarks=e.info.quote_remarks,$.expected_lease_time=e.info.expected_lease_time,$.discount=e.info.discount,$.discount_type=e.info.discount_type}))};(0,o.bv)((()=>{Z()}));const U=(0,n.iH)(),x=()=>{U.value.validate().then((e=>e?$.quote_storehouse.length<1?c.Z.create({message:k("請選擇倉庫"),position:"top",color:"negative"}):(W.value=!0,void V("/quote/save_quote",{data:$},(e=>{"success"===e.status?(W.value=!1,c.Z.create({message:e.message,position:"top",color:"positive"}),t.go(-1)):c.Z.create({message:e.message,position:"top",color:"negative"})}))):document.activeElement?.scrollIntoView({behavior:"smooth"})))};return(e,t)=>{const l=(0,o.up)("q-card-section"),s=(0,o.up)("q-btn-toggle"),u=(0,o.up)("q-input"),c=(0,o.up)("date"),k=(0,o.up)("q-btn"),V=(0,o.up)("q-card"),Z=(0,o.up)("q-form"),z=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(z,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{ref_key:"formRef",ref:U},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"q-pa-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",m,(0,a.zw)(e.$t("編輯報價")),1)])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Uk)((0,a.zw)(e.$t("客戶的類型"))+": ",1),0===$.customer.type?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)((0,a.zw)(e.$t("個人")),1)],64)):(0,o.kq)("",!0),1===$.customer.type?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,a.zw)(e.$t("公司")),1)],64)):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(l,{class:"q-pb-none"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(d.Z),{modelValue:$.customer,"onUpdate:modelValue":t[0]||(t[0]=e=>$.customer=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",p,(0,a.zw)(e.$t("折扣資訊")),1),(0,o._)("div",q,[(0,o.Wm)(s,{modelValue:$.discount_type,"onUpdate:modelValue":t[1]||(t[1]=e=>$.discount_type=e),options:[{label:e.$t("固定金額"),value:1},{label:e.$t("百分比"),value:2}]},null,8,["modelValue","options"])]),(0,o._)("div",v,[(0,o.Wm)(u,{class:"col-5",label:e.$t("折扣(%OFF)"),outlined:"",dense:"",clearable:"",modelValue:$.discount,"onUpdate:modelValue":t[2]||(t[2]=e=>$.discount=e)},null,8,["label","modelValue"]),(0,o._)("span",w,"$ "+(0,a.zw)(e.fmtCurrency($.discount_total)),1)])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",f,(0,a.zw)(e.$t("預計搬入時間")),1),(0,o._)("div",g,[(0,o.Wm)(c,{class:"col-5",rules:[t=>t&&t.length>0||e.$t("請選擇預計搬入時間")],outlined:"",dense:"",clearable:"",modelValue:$.expected_lease_time,"onUpdate:modelValue":t[3]||(t[3]=e=>$.expected_lease_time=e)},null,8,["rules","modelValue"])])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(i.Z),{modelValue:$.quote_storehouse,"onUpdate:modelValue":t[4]||(t[4]=e=>$.quote_storehouse=e),discount:$.discount,params:{id:e.$route.params.id},discount_type:$.discount_type},null,8,["modelValue","discount","params","discount_type"])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o._)("div",h,[(0,o.Wm)((0,n.SU)(_.Z),{modelValue:$.quote_remarks,"onUpdate:modelValue":t[5]||(t[5]=e=>$.quote_remarks=e)},null,8,["modelValue"])])])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o.Wm)(k,{size:"md",color:"primary",unelevated:"",onClick:x,loading:W.value,label:e.$t("儲存")},null,8,["loading","label"]),(0,o.Wm)(k,{to:"/quotation",size:"md",color:"negative",unelevated:"",label:e.$t("返回")},null,8,["label"])])])),_:1})])),_:1})])),_:1},512)])),_:1})}}};var V=l(9885),W=l(8326),$=l(4458),Z=l(3190),U=l(1389),x=l(6611),z=l(8879),Q=l(9984),C=l.n(Q);const F=k,H=F;C()(k,"components",{QPage:V.Z,QForm:W.Z,QCard:$.Z,QCardSection:Z.Z,QBtnToggle:U.Z,QInput:x.Z,QBtn:z.Z})}}]);